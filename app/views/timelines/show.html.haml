
%div
  %h3.float
    %strong #{truncate(@tlentry.title, :length=> 75, :ommission => "...")}
  %br
  %a{:id => "tlsummaryanchor", :href => "#", "data-toggle" => "collapse", "data-target" => "#tlsummary"}
    Details..
    -if @tlentry.imgurl == "" && @tlentry.desc == "" && @tlentry.tags == ""
      %i.icon-arrow-down
    -else
      %i.icon-arrow-up
  -if !current_user.nil? && @tlentry.owner_id == current_user.id
    %span.offset4
      %a{:href => edit_timeline_path(@tlentry), :style => "padding-right: 15px", :title => "Edit timeline", :rel => "tooltip"}
        %i.icon-edit
        Edit
      %i.icon-remove
      = link_to "Delete", timeline_path(@tlentry), :title => "Delete timeline", :rel => "tooltip", :method=> :delete, :confirm => 'Are you sure you want to delete this event?'
%br
%div.collapse.in{:id => "tlsummary"}
  %div.well.fixed_height_tlsummary  
    /
    / Display image
    /
    -if @tlentry.imgurl != ""
      %img{ :class => "tlpgimg", :src => "#{@tlentry.imgurl}", :alt => ""}
    -else
      %img{ :class => "tlpgimg", :src => "/assets/default_tlimg.png", :alt => ""}
    /
    / Display description
    /
    -if @tlentry.desc != ""
      %p.search_result_tldesc
        = truncate(@tlentry.desc, :length=> 200, :ommission => "...")
    /
    / Display owner name
    /
    -owner_name = User.find(@tlentry.owner_id).name
    %p.search_result_tlauthor
      #{owner_name}
    /
    / Display tags
    /            
    %strong.small Tags:
    -if @tlentry.tags != ""
      -@tlentry.tags.split(/,/).each do |each_tag|
        %a{:href => "#{tlnsearch_path}?tlquery=#{each_tag}"}
          %span.label.label-info #{each_tag} 
      
      

= render 'timelines/timeline_core'

/Let's collapse this section by default if all ements in side it are not available.
-if @tlentry.imgurl == "" && @tlentry.desc == "" && @tlentry.tags == ""
  %script{:type => "text/javascript"}
    $(function ()  
    { 
    $("#tlsummary").collapse('hide');  
    
    });     
      
  
               