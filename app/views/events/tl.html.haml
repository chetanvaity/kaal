%div.container
  %div.row
    %div.span12
      %br
      %br
      = form_tag events_q_v2_path, :method => :post, :class => "well form-horizontal form-search" do
        - if flash[:notice]
          %div.alert.alert-success
            %i.icon-ok-sign
            = flash[:notice]
        - elsif flash[:warning]
          %div.alert.alert-error
            %i.icon-exclamation-sign
            = flash[:warning]

        = text_field_tag :from, nil, {:class => "input-small", :placeholder => "From: (eg: 1947)"}
        = text_field_tag :to, nil, {:class => "input-small", :placeholder => "To: (eg: 1977)"}
        = text_field_tag :tags, nil, {:class => "input-medium", :placeholder => "eg: india,prime minister"}
        = button_tag(:type => "submit", :class => "btn btn-primary") do
          %i.icon-search.icon-white
          = p " Search"
        &nbsp;
        %span.pull-right
          Examples:
          %a{:href => "/events/q/v2?tags=demo,R+D+Burman"}
            %span.label.label-info R D Burman
          &nbsp;
          %a{:href => "/events/q/v2?tags=demo,Shivaji,Aurangzeb"}
            %span.label.label-info Shivaji,Aurangzeb
          &nbsp;
          %a{:href => "/events/q/v2?tags=demo,India,Medicine"}
            %span.label.label-info India,Medicine
  
  %div#status-line
    - if (@fromdate.nil? or @fromdate.empty?) and (@todate.nil? or @todate.empty)
      &nbsp; #{@events_size} events for tags: #{@tags}
    - else
      &nbsp; #{@events_size} events between [#{@fromdate} - #{@todate}] for tags: #{@tags}

  -if @events_size > 0
    %ul{:class => "nav nav-tabs"}
      -if @viewstyle == "tl"
        %li.active
          %a{:href => "/events/q/v2?view=tl&tags=#{@tags}&tlid=#{@tlid}"} Timeline View
        %li
          %a{:href => "/events/q/v2?view=list&tags=#{@tags}&tlid=#{@tlid}"} List View
      -else
        %li
          %a{:href => "/events/q/v2?view=tl&tags=#{@tags}&tlid=#{@tlid}"} Timeline View
        %li.active
          %a{:href => "/events/q/v2?view=list&tags=#{@tags}&tlid=#{@tlid}"} List View
    -if @viewstyle == "list"
      = render 'elistview'
      
  -if @events_size > 0
    -if @viewstyle == "tl"
      %div.row
        %div.span12.well
          %div#timeline-embed

  
 
%script{:type => "text/javascript"}
  :plain
    var timeline_config = {
    width:  "100%",
    height: "400",
    source: "#{@json_resource_path}",
    css: '/assets/timeline.css',
    js: '/js/timeline-min-2.js'
    }

%script{:type => "text/javascript",
	:src => "/js/timeline-embed.js"}
