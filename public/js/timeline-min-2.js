/*!
	TimelineJS
	Designed and built by Zach Wise at VéritéCo

	This program is free software: you can redistribute it and/or modify
	it under the terms of the GNU General Public License as published by
	the Free Software Foundation, either version 3 of the License, or
	(at your option) any later version.

	This program is distributed in the hope that it will be useful,
	but WITHOUT ANY WARRANTY; without even the implied warranty of
	MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
	GNU General Public License for more details.

	http://www.gnu.org/licenses/
	
*/
(function(){var a=false,b=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;this.Class=function(){};Class.extend=function(g){var f=this.prototype;a=true;var e=new this();a=false;for(var d in g){e[d]=typeof g[d]=="function"&&typeof f[d]=="function"&&b.test(g[d])?(function(h,i){return function(){var k=this._super;this._super=f[h];var j=i.apply(this,arguments);this._super=k;return j}})(d,g[d]):g[d]}function c(){if(!a&&this.init){this.init.apply(this,arguments)}}c.prototype=e;c.prototype.constructor=c;c.extend=arguments.callee;return c}})();var global=(function(){return this||(1,eval)("this")}());if(typeof VMM=="undefined"){var VMM=Class.extend({});VMM.debug=true;VMM.master_config=({init:function(){return this},sizes:{api:{width:0,height:0}},vp:"Pellentesque nibh felis, eleifend id, commodo in, interdum vitae, leo",api_keys_master:{flickr:"RAIvxHY4hE/Elm5cieh4X5ptMyDpj7MYIxziGxi0WGCcy1s+yr7rKQ==",google:"jwNGnYw4hE9lmAez4ll0QD+jo6SKBJFknkopLS4FrSAuGfIwyj57AusuR0s8dAo=",twitter:""},timers:{api:7000},api:{pushques:[]},twitter:{active:false,array:[],api_loaded:false,que:[]},flickr:{active:false,array:[],api_loaded:false,que:[]},youtube:{active:false,array:[],api_loaded:false,que:[]},vimeo:{active:false,array:[],api_loaded:false,que:[]},googlemaps:{active:false,map_active:false,places_active:false,array:[],api_loaded:false,que:[]},googledocs:{active:false,array:[],api_loaded:false,que:[]},googleplus:{active:false,array:[],api_loaded:false,que:[]},wikipedia:{active:false,array:[],api_loaded:false,que:[],tries:0},soundcloud:{active:false,array:[],api_loaded:false,que:[]}}).init();VMM.createElement=function(b,e,a,c,d){var f="";if(b!=null&&b!=""){f+="<"+b;if(a!=null&&a!=""){f+=" class='"+a+"'"}if(c!=null&&c!=""){f+=" "+c}if(d!=null&&d!=""){f+=" style='"+d+"'"}f+=">";if(e!=null&&e!=""){f+=e}f=f+"</"+b+">"}return f};VMM.createMediaElement=function(d,b,e){var c="";var a=false;c+="<div class='media'>";if(d!=null&&d!=""){valid=true;c+="<img src='"+d+"'>";if(e!=null&&e!=""){c+=VMM.createElement("div",e,"credit")}if(b!=null&&b!=""){c+=VMM.createElement("div",b,"caption")}}c+="</div>";return c};VMM.hideUrlBar=function(){var d=window,c=d.document;if(!location.hash||!d.addEventListener){window.scrollTo(0,1);var b=1,a=setInterval(function(){if(c.body){clearInterval(a);b="scrollTop" in c.body?c.body.scrollTop:1;d.scrollTo(0,b===1?0:1)}},15);d.addEventListener("load",function(){setTimeout(function(){d.scrollTo(0,b===1?0:1)},0)},false)}}}function trace(a){if(VMM.debug){if(window.console){console.log(a)}else{if(typeof(jsTrace)!="undefined"){jsTrace.send(a)}else{}}}}Array.prototype.remove=function(c,b){var a=this.slice((b||c)+1||this.length);this.length=c<0?this.length+c:c;return this.push.apply(this,a)};Date.prototype.getWeek=function(){var a=new Date(this.getFullYear(),0,1);return Math.ceil((((this-a)/86400000)+a.getDay()+1)/7)};Date.prototype.getDayOfYear=function(){var a=new Date(this.getFullYear(),0,1);return Math.ceil((this-a)/86400000)};var is={Null:function(b){return b===null},Undefined:function(b){return b===undefined},nt:function(b){return(b===null||b===undefined)},Function:function(b){return(typeof(b)==="function")?b.constructor.toString().match(/Function/)!==null:false},String:function(b){return(typeof(b)==="string")?true:(typeof(b)==="object")?b.constructor.toString().match(/string/i)!==null:false},Array:function(b){return(typeof(b)==="object")?b.constructor.toString().match(/array/i)!==null||b.length!==undefined:false},Boolean:function(b){return(typeof(b)==="boolean")?true:(typeof(b)==="object")?b.constructor.toString().match(/boolean/i)!==null:false},Date:function(b){return(typeof(b)==="date")?true:(typeof(b)==="object")?b.constructor.toString().match(/date/i)!==null:false},HTML:function(b){return(typeof(b)==="object")?b.constructor.toString().match(/html/i)!==null:false},Number:function(b){return(typeof(b)==="number")?true:(typeof(b)==="object")?b.constructor.toString().match(/Number/)!==null:false},Object:function(b){return(typeof(b)==="object")?b.constructor.toString().match(/object/i)!==null:false},RegExp:function(b){return(typeof(b)==="function")?b.constructor.toString().match(/regexp/i)!==null:false}};var type={of:function(b){for(var c in is){if(is[c](b)){return c.toLowerCase()}}}};if(typeof VMM!="undefined"){VMM.attachElement=function(a,b){if(typeof(jQuery)!="undefined"){jQuery(a).html(b)}};VMM.appendElement=function(a,b){if(typeof(jQuery)!="undefined"){jQuery(a).append(b)}};VMM.getHTML=function(a){var b;if(typeof(jQuery)!="undefined"){b=jQuery(a).html();return b}};VMM.getElement=function(a,c){var b;if(typeof(jQuery)!="undefined"){if(c){b=jQuery(a).parent().get(0)}else{b=jQuery(a).get(0)}return b}};VMM.bindEvent=function(c,f,b,a){var h;var d="click";var g={};if(b!=null&&b!=""){d=b}if(g!=null&&g!=""){g=a}if(typeof(jQuery)!="undefined"){jQuery(c).bind(d,g,f)}};VMM.unbindEvent=function(b,d,a){var g;var c="click";var f={};if(a!=null&&a!=""){c=a}if(typeof(jQuery)!="undefined"){jQuery(b).unbind(c,d)}};VMM.fireEvent=function(c,a,b){var g;var f="click";var d=[];if(a!=null&&a!=""){f=a}if(b!=null&&b!=""){d=b}if(typeof(jQuery)!="undefined"){jQuery(c).trigger(f,d)}};VMM.getJSON=function(b,c,d){if(typeof(jQuery)!="undefined"){jQuery.ajaxSetup({timeout:3000});if(VMM.Browser.browser=="Explorer"&&parseInt(VMM.Browser.version,10)>=7&&window.XDomainRequest){trace("IE JSON");var a=b;if(a.match("^http://")){return jQuery.getJSON(a,c,d)}else{if(a.match("^https://")){a=a.replace("https://","http://");return jQuery.getJSON(a,c,d)}else{return jQuery.getJSON(b,c,d)}}}else{return jQuery.getJSON(b,c,d)}}};VMM.parseJSON=function(a){if(typeof(jQuery)!="undefined"){return jQuery.parseJSON(a)}};VMM.appendAndGetElement=function(g,j,i,f){var d,a="<div>",b="",c="",h="";if(j!=null&&j!=""){a=j}if(i!=null&&i!=""){b=i}if(f!=null&&f!=""){c=f}if(typeof(jQuery)!="undefined"){d=jQuery(j);d.addClass(b);d.html(c);jQuery(g).append(d)}return d};VMM.Lib={init:function(){return this},hide:function(a,b){if(b!=null&&b!=""){if(typeof(jQuery)!="undefined"){jQuery(a).hide(b)}}else{if(typeof(jQuery)!="undefined"){jQuery(a).hide()}}},remove:function(a){if(typeof(jQuery)!="undefined"){jQuery(a).remove()}},detach:function(a){if(typeof(jQuery)!="undefined"){jQuery(a).detach()}},append:function(a,b){if(typeof(jQuery)!="undefined"){jQuery(a).append(b)}},prepend:function(a,b){if(typeof(jQuery)!="undefined"){jQuery(a).prepend(b)}},show:function(a,b){if(b!=null&&b!=""){if(typeof(jQuery)!="undefined"){jQuery(a).show(b)}}else{if(typeof(jQuery)!="undefined"){jQuery(a).show()}}},load:function(b,d,a){var c={elem:b};if(c!=null&&c!=""){c=a}if(typeof(jQuery)!="undefined"){jQuery(b).load(c,d)}},addClass:function(b,a){if(typeof(jQuery)!="undefined"){jQuery(b).addClass(a)}},removeClass:function(b,a){if(typeof(jQuery)!="undefined"){jQuery(b).removeClass(a)}},attr:function(a,c,b){if(b!=null&&b!=""){if(typeof(jQuery)!="undefined"){jQuery(a).attr(c,b)}}else{if(typeof(jQuery)!="undefined"){return jQuery(a).attr(c)}}},prop:function(a,c,b){if(typeof jQuery=="undefined"||!/[1-9]\.[3-9].[1-9]/.test(jQuery.fn.jquery)){VMM.Lib.attribute(a,c,b)}else{jQuery(a).prop(c,b)}},attribute:function(a,c,b){if(b!=null&&b!=""){if(typeof(jQuery)!="undefined"){jQuery(a).attr(c,b)}}else{if(typeof(jQuery)!="undefined"){return jQuery(a).attr(c)}}},visible:function(b,a){if(a!=null){if(typeof(jQuery)!="undefined"){if(a){jQuery(b).show(0)}else{jQuery(b).hide(0)}}}else{if(typeof(jQuery)!="undefined"){if(jQuery(b).is(":visible")){return true}else{return false}}}},css:function(a,c,b){if(b!=null&&b!=""){if(typeof(jQuery)!="undefined"){jQuery(a).css(c,b)}}else{if(typeof(jQuery)!="undefined"){return jQuery(a).css(c)}}},cssmultiple:function(b,a){if(typeof(jQuery)!="undefined"){return jQuery(b).css(a)}},offset:function(a){var b;if(typeof(jQuery)!="undefined"){b=jQuery(a).offset()}return b},position:function(a){var b;if(typeof(jQuery)!="undefined"){b=jQuery(a).position()}return b},width:function(a,b){if(b!=null&&b!=""){if(typeof(jQuery)!="undefined"){jQuery(a).width(b)}}else{if(typeof(jQuery)!="undefined"){return jQuery(a).width()}}},height:function(a,b){if(b!=null&&b!=""){if(typeof(jQuery)!="undefined"){jQuery(a).height(b)}}else{if(typeof(jQuery)!="undefined"){return jQuery(a).height()}}},toggleClass:function(b,a){if(typeof(jQuery)!="undefined"){jQuery(b).toggleClass(a)}},each:function(a,b){if(typeof(jQuery)!="undefined"){jQuery(a).each(b)}},html:function(a,c){var b;if(typeof(jQuery)!="undefined"){b=jQuery(a).html();return b}if(c!=null&&c!=""){if(typeof(jQuery)!="undefined"){jQuery(a).html(c)}}else{var b;if(typeof(jQuery)!="undefined"){b=jQuery(a).html();return b}}},find:function(b,a){if(typeof(jQuery)!="undefined"){return jQuery(b).find(a)}},stop:function(a){if(typeof(jQuery)!="undefined"){jQuery(a).stop()}},delay_animate:function(b,c,e,g,a,d){if(VMM.Browser.device=="mobile"||VMM.Browser.device=="tablet"){var h=Math.round((e/1500)*10)/10,f=h+"s";VMM.Lib.css(c,"-webkit-transition","all "+f+" ease");VMM.Lib.css(c,"-moz-transition","all "+f+" ease");VMM.Lib.css(c,"-o-transition","all "+f+" ease");VMM.Lib.css(c,"-ms-transition","all "+f+" ease");VMM.Lib.css(c,"transition","all "+f+" ease");VMM.Lib.cssmultiple(c,_att)}else{if(typeof(jQuery)!="undefined"){jQuery(c).delay(b).animate(a,{duration:e,easing:g})}}},animate:function(g,d,c,i,h,l){var a="easein",j=false,f=1000,k={};if(d!=null){if(d<1){f=1}else{f=Math.round(d)}}if(c!=null&&c!=""){a=c}if(h!=null&&h!=""){j=h}if(i!=null){k=i}else{k={opacity:0}}if(VMM.Browser.device=="mobile"||VMM.Browser.device=="tablet"){var b=Math.round((f/1500)*10)/10,e=b+"s";VMM.Lib.css(g,"-webkit-transition","all "+e+" ease");VMM.Lib.css(g,"-moz-transition","all "+e+" ease");VMM.Lib.css(g,"-o-transition","all "+e+" ease");VMM.Lib.css(g,"-ms-transition","all "+e+" ease");VMM.Lib.css(g,"transition","all "+e+" ease");VMM.Lib.cssmultiple(g,k)}else{if(typeof(jQuery)!="undefined"){if(l!=null&&l!=""){jQuery(g).animate(k,{queue:j,duration:f,easing:a,complete:l})}else{jQuery(g).animate(k,{queue:j,duration:f,easing:a})}}}}}}if(typeof(jQuery)!="undefined"){(function(a){if(window.XDomainRequest){a.ajaxTransport(function(c){if(c.crossDomain&&c.async){if(c.timeout){c.xdrTimeout=c.timeout;delete c.timeout}var b;return{send:function(e,d){function f(g,j,i,h){b.onload=b.onerror=b.ontimeout=a.noop;b=undefined;d(g,j,i,h)}b=new XDomainRequest();b.open(c.type,c.url);b.onload=function(){f(200,"OK",{text:b.responseText},"Content-Type: "+b.contentType)};b.onerror=function(){f(404,"Not Found")};if(c.xdrTimeout){b.ontimeout=function(){f(0,"timeout")};b.timeout=c.xdrTimeout}b.send((c.hasContent&&c.data)||null)},abort:function(){if(b){b.onerror=a.noop();b.abort()}}}}})}})(jQuery);jQuery.easing.jswing=jQuery.easing.swing;jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(e,f,a,h,g){return jQuery.easing[jQuery.easing.def](e,f,a,h,g)},easeInExpo:function(e,f,a,h,g){return(f==0)?a:h*Math.pow(2,10*(f/g-1))+a},easeOutExpo:function(e,f,a,h,g){return(f==g)?a+h:h*(-Math.pow(2,-10*f/g)+1)+a},easeInOutExpo:function(e,f,a,h,g){if(f==0){return a}if(f==g){return a+h}if((f/=g/2)<1){return h/2*Math.pow(2,10*(f-1))+a}return h/2*(-Math.pow(2,-10*--f)+2)+a},easeInQuad:function(e,f,a,h,g){return h*(f/=g)*f+a},easeOutQuad:function(e,f,a,h,g){return -h*(f/=g)*(f-2)+a},easeInOutQuad:function(e,f,a,h,g){if((f/=g/2)<1){return h/2*f*f+a}return -h/2*((--f)*(f-2)-1)+a}})}if(typeof VMM!="undefined"&&typeof VMM.Browser=="undefined"){VMM.Browser={init:function(){this.browser=this.searchString(this.dataBrowser)||"An unknown browser";this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"an unknown version";this.OS=this.searchString(this.dataOS)||"an unknown OS";this.device=this.searchDevice(navigator.userAgent);this.orientation=this.searchOrientation(window.orientation)},searchOrientation:function(a){if(a==0||a==180){return"portrait"}else{if(a==90||a==-90){return"landscape"}else{return"normal"}}},searchDevice:function(a){if(a.match(/Android/i)||a.match(/iPhone|iPod/i)){return"mobile"}else{if(a.match(/iPad/i)){return"tablet"}else{if(a.match(/BlackBerry/i)||a.match(/IEMobile/i)){return"other mobile"}else{return"desktop"}}}},searchString:function(d){for(var a=0;a<d.length;a++){var b=d[a].string;var c=d[a].prop;this.versionSearchString=d[a].versionSearch||d[a].identity;if(b){if(b.indexOf(d[a].subString)!=-1){return d[a].identity}}else{if(c){return d[a].identity}}}},searchVersion:function(b){var a=b.indexOf(this.versionSearchString);if(a==-1){return}return parseFloat(b.substring(a+this.versionSearchString.length+1))},dataBrowser:[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera",versionSearch:"Version"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],dataOS:[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod"},{string:navigator.userAgent,subString:"iPad",identity:"iPad"},{string:navigator.platform,subString:"Linux",identity:"Linux"}]};VMM.Browser.init()}if(typeof VMM!="undefined"&&typeof VMM.FileExtention=="undefined"){VMM.FileExtention={googleDocType:function(c){var f=c;var e="";e=f.substr(f.length-5,5);var b=["DOC","DOCX","XLS","XLSX","PPT","PPTX","PDF","PAGES","AI","PSD","TIFF","DXF","SVG","EPS","PS","TTF","XPS","ZIP","RAR"];var a=false;for(var d=0;d<b.length;d++){if(e.toLowerCase().match(b[d].toString().toLowerCase())||f.match("docs.google.com")){a=true}}return a}}}if(typeof VMM!="undefined"&&typeof VMM.Date=="undefined"){VMM.Date=({init:function(){return this},dateformats:{year:"yyyy",month_short:"mmm",month:"mmmm yyyy",full_short:"mmm d",full:"mmmm d',' yyyy",time_no_seconds_short:"h:MM TT",time_no_seconds_small_date:"h:MM TT'<br/><small>'mmmm d',' yyyy'</small>'",full_long:"mmm d',' yyyy 'at' hh:MM TT",full_long_small_date:"hh:MM TT'<br/><small>mmm d',' yyyy'</small>'"},month:["January","February","March","April","May","June","July","August","September","October","November","December"],month_abbr:["Jan.","Feb.","March","April","May","June","July","Aug.","Sept.","Oct.","Nov.","Dec."],day:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],day_abbr:["Sun.","Mon.","Tues.","Wed.","Thurs.","Fri.","Sat."],hour:[1,2,3,4,5,6,7,8,9,10,11,12,1,2,3,4,5,6,7,8,9,10,11,12],hour_suffix:["am"],bc_format:{year:"yyyy",month_short:"mmm",month:"mmmm yyyy",full_short:"mmm d",full:"mmmm d',' yyyy",time_no_seconds_short:"h:MM TT",time_no_seconds_small_date:"dddd', 'h:MM TT'<br/><small>'mmmm d',' yyyy'</small>'",full_long:"dddd',' mmm d',' yyyy 'at' hh:MM TT",full_long_small_date:"hh:MM TT'<br/><small>'dddd',' mmm d',' yyyy'</small>'"},setLanguage:function(a){trace("SET DATE LANGUAGE");VMM.Date.dateformats=a.dateformats;VMM.Date.month=a.date.month;VMM.Date.month_abbr=a.date.month_abbr;VMM.Date.day=a.date.day;VMM.Date.day_abbr=a.date.day_abbr;dateFormat.i18n.dayNames=a.date.day_abbr.concat(a.date.day);dateFormat.i18n.monthNames=a.date.month_abbr.concat(a.date.month)},parse:function(h){if(type.of(h)=="date"){return h}else{var b=new Date(0,0,1,0,0,0,0);var g,a;var f,e;if(h.match(/,/gi)){g=h.split(",");for(var c=0;c<g.length;c++){g[c]=parseInt(g[c])}if(g[0]){b.setFullYear(g[0])}if(g[1]>1){b.setMonth(g[1]-1)}if(g[2]>1){b.setDate(g[2])}if(g[3]>1){b.setHours(g[3])}if(g[4]>1){b.setMinutes(g[4])}if(g[5]>1){b.setSeconds(g[5])}if(g[6]>1){b.setMilliseconds(g[6])}}else{if(h.match("/")){if(h.match(" ")){f=h.split(" ");if(h.match(":")){a=f[1].split(":");if(a[0]>=1){b.setHours(a[0])}if(a[1]>=1){b.setMinutes(a[1])}if(a[2]>=1){b.setSeconds(a[2])}if(a[3]>=1){b.setMilliseconds(a[3])}}g=f[0].split("/")}else{g=h.split("/")}if(g[2]){b.setFullYear(g[2])}if(g[0]>1){b.setMonth(g[0]-1)}if(g[1]>1){b.setDate(g[1])}}else{if(h.length<=5){b.setFullYear(parseInt(h));b.setMonth(0);b.setDate(1);b.setHours(0);b.setMinutes(0);b.setSeconds(0);b.setMilliseconds(0)}else{if(h.match("T")){if(navigator.userAgent.match(/MSIE\s(?!9.0)/)){f=h.split("T");if(h.match(":")){a=f[1].split(":");if(a[0]>=1){b.setHours(a[0])}if(a[1]>=1){b.setMinutes(a[1])}if(a[2]>=1){b.setSeconds(a[2])}if(a[3]>=1){b.setMilliseconds(a[3])}}g=f[0].split("-");if(g[0]){b.setFullYear(g[0])}if(g[1]>1){b.setMonth(g[1]-1)}if(g[2]>1){b.setDate(g[2])}}else{b=new Date(Date.parse(h))}}else{b=new Date(parseInt(h.slice(0,4)),parseInt(h.slice(4,6))-1,parseInt(h.slice(6,8)),parseInt(h.slice(8,10)),parseInt(h.slice(10,12)))}}}}return b}},prettyDate:function(k,l,a){var n;var b;var m;var e;var c=false;if(a!=null){c=true}if(type.of(k)=="date"){if(k.getMonth()===0&&k.getDate()==1&&k.getHours()===0&&k.getMinutes()===0){m=VMM.Date.dateformats.year}else{if(k.getDate()<=1&&k.getHours()===0&&k.getMinutes()===0){if(l){m=VMM.Date.dateformats.month_short}else{m=VMM.Date.dateformats.month}}else{if(k.getHours()===0&&k.getMinutes()===0){if(l){m=VMM.Date.dateformats.full_short}else{m=VMM.Date.dateformats.full}}else{if(k.getMinutes()===0){if(l){m=VMM.Date.dateformats.time_no_seconds_short}else{m=VMM.Date.dateformats.time_no_seconds_small_date}}else{if(l){m=VMM.Date.dateformats.time_no_seconds_short}else{m=VMM.Date.dateformats.full_long}}}}}n=dateFormat(k,m,false);e=n.split(" ");for(var g=0;g<e.length;g++){if(parseInt(e[g])<0){trace("YEAR IS BC");var f=e[g];var h=Math.abs(parseInt(e[g]));var j=h.toString()+" B.C.";n=n.replace(f,j)}}if(c){b=dateFormat(a,m);e=b.split(" ");for(var g=0;g<e.length;g++){if(parseInt(e[g])<0){trace("YEAR IS BC");var f=e[g];var h=Math.abs(parseInt(e[g]));var j=h.toString()+" B.C.";b=b.replace(f,j)}}}}else{trace("NOT A VALID DATE?");trace(k)}if(c){return n+" &mdash; "+b}else{return n}}}).init();var dateFormat=function(){var a=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,b=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,d=/[^-+\dA-Z]/g,c=function(f,e){f=String(f);e=e||2;while(f.length<e){f="0"+f}return f};return function(i,v,q){var g=dateFormat;if(arguments.length==1&&Object.prototype.toString.call(i)=="[object String]"&&!/\d/.test(i)){v=i;i=undefined}if(isNaN(i)){trace("invalid date "+i)}v=String(g.masks[v]||v||g.masks["default"]);if(v.slice(0,4)=="UTC:"){v=v.slice(4);q=true}var t=q?"getUTC":"get",l=i[t+"Date"](),e=i[t+"Day"](),j=i[t+"Month"](),p=i[t+"FullYear"](),r=i[t+"Hours"](),k=i[t+"Minutes"](),u=i[t+"Seconds"](),n=i[t+"Milliseconds"](),f=q?0:i.getTimezoneOffset(),h={d:l,dd:c(l),ddd:g.i18n.dayNames[e],dddd:g.i18n.dayNames[e+7],m:j+1,mm:c(j+1),mmm:g.i18n.monthNames[j],mmmm:g.i18n.monthNames[j+12],yy:String(p).slice(2),yyyy:p,h:r%12||12,hh:c(r%12||12),H:r,HH:c(r),M:k,MM:c(k),s:u,ss:c(u),l:c(n,3),L:c(n>99?Math.round(n/10):n),t:r<12?"a":"p",tt:r<12?"am":"pm",T:r<12?"A":"P",TT:r<12?"AM":"PM",Z:q?"UTC":(String(i).match(b)||[""]).pop().replace(d,""),o:(f>0?"-":"+")+c(Math.floor(Math.abs(f)/60)*100+Math.abs(f)%60,4),S:["th","st","nd","rd"][l%10>3?0:(l%100-l%10!=10)*l%10]};return v.replace(a,function(m){return m in h?h[m]:m.slice(1,m.length-1)})}}();dateFormat.masks={"default":"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"};dateFormat.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]};Date.prototype.format=function(a,b){return dateFormat(this,a,b)}}if(typeof VMM!="undefined"&&typeof VMM.Util=="undefined"){VMM.Util=({init:function(){return this},correctProtocol:function(a){var d=(window.parent.location.protocol).toString();var c="";var b=a.split("://",2);if(d.match("http")){c=d}else{c="https"}return c+"://"+b[1]},getObjectAttributeByIndex:function(d,b){if(typeof d!="undefined"){var c=0;for(var a in d){if(b===c){return d[a]}c++}return""}else{return""}},randomBetween:function(b,a){return Math.floor(Math.random()*(a-b+1)+b)},average:function(d){var g={mean:0,variance:0,deviation:0},e=d.length;for(var b,f=0,c=e;c--;f+=d[c]){}for(b=g.mean=f/e,c=e,f=0;c--;f+=Math.pow(d[c]-b,2)){}return g.deviation=Math.sqrt(g.variance=f/e),g},customSort:function(e,c){var d=e,f=c;if(d==f){return 0}return d>f?1:-1},deDupeArray:function(b){var d,a=b.length,c=[],e={};for(d=0;d<a;d++){e[b[d]]=0}for(d in e){c.push(d)}return c},number2money:function(e,c,d){var c=(c!==null)?c:true;var d=(d!==null)?d:false;var a=VMM.Math2.floatPrecision(e,2);var b=this.niceNumber(a);if(!b.split(/\./g)[1]&&d){b=b+".00"}if(c){b="$"+b}return b},wordCount:function(c){var f=c+" ";var h=/^[^A-Za-z0-9\'\-]+/gi;var b=f.replace(h,"");var a=/[^A-Za-z0-9\'\-]+/gi;var d=b.replace(a," ");var e=d.split(" ");var g=e.length-1;if(f.length<2){g=0}return g},ratio:{fit:function(a,d,b,e){var c={width:0,height:0};c.width=a;c.height=Math.round((a/b)*e);if(c.height>d){c.height=d;c.width=Math.round((d/e)*b);if(c.width>a){trace("FIT: DIDN'T FIT!!! ")}}return c},r16_9:function(a,b){if(a!==null&&a!==""){return Math.round((b/16)*9)}else{if(b!==null&&b!==""){return Math.round((a/9)*16)}}},r4_3:function(a,b){if(a!==null&&a!==""){return Math.round((b/4)*3)}else{if(b!==null&&b!==""){return Math.round((a/3)*4)}}}},doubledigit:function(a){return(a<10?"0":"")+a},truncateWords:function(k,c,g){if(!c){c=30}if(!g){g=c}var d=/^[^A-Za-z0-9\'\-]+/gi;var h=k.replace(d,"");var f=h.split(" ");var l=[];c=Math.min(f.length,c);g=Math.min(f.length,g);for(var e=0;e<c;e++){l.push(f[e])}for(var b=c;e<g;e++){var a=f[e];l.push(a);if(a.charAt(a.length-1)=="."){break}}return(l.join(" "))},linkify:function(f,b,d){var c=/\b(?:https?|ftp):\/\/[a-z0-9-+&@#\/%?=~_|!:,.;]*[a-z0-9-+&@#\/%=~_|]/gim;var e=/(^|[^\/])(www\.[\S]+(\b|$))/gim;var a=/(([a-zA-Z0-9_\-\.]+)@[a-zA-Z_]+?(?:\.[a-zA-Z]{2,6}))+/gim;return f.replace(c,"<a target='_blank' href='$&' onclick='void(0)'>$&</a>").replace(e,"$1<a target='_blank' onclick='void(0)' href='http://$2'>$2</a>").replace(a,"<a target='_blank' onclick='void(0)' href='mailto:$1'>$1</a>")},linkify_with_twitter:function(j,i,c){var e=/\b(?:https?|ftp):\/\/[a-z0-9-+&@#\/%?=~_|!:,.;]*[a-z0-9-+&@#\/%=~_|]/gim;var h=/(\()((?:ht|f)tps?:\/\/[a-z0-9\-._~!$&'()*+,;=:\/?#[\]@%]+)(\))|(\[)((?:ht|f)tps?:\/\/[a-z0-9\-._~!$&'()*+,;=:\/?#[\]@%]+)(\])|(\{)((?:ht|f)tps?:\/\/[a-z0-9\-._~!$&'()*+,;=:\/?#[\]@%]+)(\})|(<|&(?:lt|#60|#x3c);)((?:ht|f)tps?:\/\/[a-z0-9\-._~!$&'()*+,;=:\/?#[\]@%]+)(>|&(?:gt|#62|#x3e);)|((?:^|[^=\s'"\]])\s*['"]?|[^=\s]\s+)(\b(?:ht|f)tps?:\/\/[a-z0-9\-._~!$'()*+,;=:\/?#[\]@%]+(?:(?!&(?:gt|#0*62|#x0*3e);|&(?:amp|apos|quot|#0*3[49]|#x0*2[27]);[.!&',:?;]?(?:[^a-z0-9\-._~!$&'()*+,;=:\/?#[\]@%]|$))&[a-z0-9\-._~!$'()*+,;=:\/?#[\]@%]*)*[a-z0-9\-_~$()*+=\/#[\]@%])/img;var a='$1$4$7$10$13<a href="$2$5$8$11$14" class="hyphenate">$2$5$8$11$14</a>$3$6$9$12';var k=/(^|[^\/])(www\.[\S]+(\b|$))/gim;function b(m){var l=/(\b(https?|ftp|file):\/\/([-A-Z0-9+&@#%?=~_|!:,.;]*)([-A-Z0-9+&@#%?\/=~_|!:,.;]*)[-A-Z0-9+&@#\/%=~_|])/ig;return m.replace(l,"<a href='$1' target='_blank'>$3</a>")}var d=/(([a-zA-Z0-9_\-\.]+)@[a-zA-Z_]+?(?:\.[a-zA-Z]{2,6}))+/gim;var f=/\B@([\w-]+)/gm;var g=/(#([\w]+))/g;return j.replace(h,a).replace(k,"$1<a target='_blank' class='hyphenate' onclick='void(0)' href='http://$2'>$2</a>").replace(d,"<a target='_blank' onclick='void(0)' href='mailto:$1'>$1</a>").replace(f,"<a href='http://twitter.com/$1' target='_blank' onclick='void(0)'>@$1</a>").replace(g,"<a href='http://twitter.com/#search?q=%23$2' target='_blank' 'void(0)'>$1</a>")},linkify_wikipedia:function(b){var a=/<i[^>]*>(.*?)<\/i>/gim;return b.replace(a,"<a target='_blank' href='http://en.wikipedia.org/wiki/$&' onclick='void(0)'>$&</a>").replace(/<i\b[^>]*>/gim,"").replace(/<\/i>/gim,"").replace(/<b\b[^>]*>/gim,"").replace(/<\/b>/gim,"")},unlinkify:function(a){if(!a){return a}a=a.replace(/<a\b[^>]*>/i,"");a=a.replace(/<\/a>/i,"");return a},untagify:function(a){if(!a){return a}a=a.replace(/<\s*\w.*?>/g,"");return a},nl2br:function(a){return a.replace(/(\r\n|[\r\n]|\\n|\\r)/g,"<br/>")},unique_ID:function(a){var c=function(e){return Math.floor(Math.random()*e)};var b=function(){var e="abcdefghijklmnopqurstuvwxyzABCDEFGHIJKLMNOPQURSTUVWXYZ";return e.substr(c(62),1)};var d=function(f){var g="";for(var e=0;e<f;e++){g+=b()}return g};return d(a)},isEven:function(a){return(a%2===0)?true:false},getUrlVars:function(b){var f=b.toString();if(f.match("&#038;")){f=f.replace("&#038;","&")}else{if(f.match("&#38;")){f=f.replace("&#38;","&")}else{if(f.match("&amp;")){f=f.replace("&amp;","&")}}}var e=[],d;var a=f.slice(f.indexOf("?")+1).split("&");for(var c=0;c<a.length;c++){d=a[c].split("=");e.push(d[0]);e[d[0]]=d[1]}return e},toHTML:function(a){a=this.nl2br(a);a=this.linkify(a);return a.replace(/\s\s/g,"&nbsp;&nbsp;")},toCamelCase:function(d,b){if(b!==false){b=true}var a=((b)?d.toLowerCase():d).split(" ");for(var c=0;c<a.length;c++){a[c]=a[c].substr(0,1).toUpperCase()+a[c].substr(1)}return a.join(" ")},properQuotes:function(a){return a.replace(/\"([^\"]*)\"/gi,"&#8220;$1&#8221;")},niceNumber:function(g){var b=String(Math.abs(Number(g)));var f=b.split(/\./g)[0];var c=b.split(/\./g)[1];var e="";var d=f.toArray();d.reverse();for(var a=1;a<=d.length;a++){if((a%3==0)&&(a<d.length)){e=","+d[a-1]+e}else{e=d[a-1]+e}}if(c!=null&&c!=""&&c!=undefined){return e+"."+c}else{return e}},toTitleCase:function(b){if(VMM.Browser.browser=="Explorer"&&parseInt(VMM.Browser.version,10)>=7){return b.replace("_","%20")}else{var a={__smallWords:["a","an","and","as","at","but","by","en","for","if","in","of","on","or","the","to","v[.]?","via","vs[.]?"],init:function(){this.__smallRE=this.__smallWords.join("|");this.__lowerCaseWordsRE=new RegExp("\\b("+this.__smallRE+")\\b","gi");this.__firstWordRE=new RegExp("^([^a-zA-Z0-9 \\r\\n\\t]*)("+this.__smallRE+")\\b","gi");this.__lastWordRE=new RegExp("\\b("+this.__smallRE+")([^a-zA-Z0-9 \\r\\n\\t]*)$","gi")},toTitleCase:function(d){var c="";var f=d.split(/([:.;?!][ ]|(?:[ ]|^)["“])/);for(var e=0;e<f.length;++e){var g=f[e];g=g.replace(/\b([a-zA-Z][a-z.'’]*)\b/g,this.__titleCaseDottedWordReplacer);g=g.replace(this.__lowerCaseWordsRE,this.__lowerReplacer);g=g.replace(this.__firstWordRE,this.__firstToUpperCase);g=g.replace(this.__lastWordRE,this.__firstToUpperCase);c+=g}c=c.replace(/ V(s?)\. /g," v$1. ");c=c.replace(/(['’])S\b/g,"$1s");c=c.replace(/\b(AT&T|Q&A)\b/ig,this.__upperReplacer);return c},__titleCaseDottedWordReplacer:function(c){return(c.match(/[a-zA-Z][.][a-zA-Z]/))?c:a.__firstToUpperCase(c)},__lowerReplacer:function(c){return c.toLowerCase()},__upperReplacer:function(c){return c.toUpperCase()},__firstToUpperCase:function(c){var d=c.split(/(^[^a-zA-Z0-9]*[a-zA-Z0-9])(.*)$/);if(d[1]){d[1]=d[1].toUpperCase()}return d.join("")}};a.init();b=b.replace(/_/g," ");b=a.toTitleCase(b);return b}}}).init()}window.loadedJS=[];if(typeof VMM!="undefined"&&typeof VMM.LoadLib=="undefined"){VMM.LoadLib=(function(l){var i,j,c={},g=0,h={css:[],js:[]},o=l.styleSheets;var f=[];function a(p){var r=false;for(var q=0;q<f.length;q++){if(f[q]==p){r=true}}if(!r){f.push(p)}return r}function n(r,q){var s=l.createElement(r),p;for(p in q){if(q.hasOwnProperty(p)){s.setAttribute(p,q[p])}}return s}function k(q){var s=c[q],t,r;if(s){t=s.callback;r=s.urls;r.shift();g=0;if(!r.length){t&&t.call(s.context,s.obj);c[q]=null;h[q].length&&m(q)}}}function d(){var p=navigator.userAgent;i={async:l.createElement("script").async===true};(i.webkit=/AppleWebKit\//.test(p))||(i.ie=/MSIE/.test(p))||(i.opera=/Opera/.test(p))||(i.gecko=/Gecko\//.test(p))||(i.unknown=true)}function m(B,A,C,x,t){var v=function(){k(B)},D=B==="css",r=[],w,y,u,s,z,q;i||d();if(A){A=typeof A==="string"?[A]:A.concat();if(D||i.async||i.gecko||i.opera){h[B].push({urls:A,callback:C,obj:x,context:t})}else{for(w=0,y=A.length;w<y;++w){h[B].push({urls:[A[w]],callback:w===y-1?C:null,obj:x,context:t})}}}if(c[B]||!(s=c[B]=h[B].shift())){return}j||(j=l.head||l.getElementsByTagName("head")[0]);z=s.urls;for(w=0,y=z.length;w<y;++w){q=z[w];if(D){u=i.gecko?n("style"):n("link",{href:q,rel:"stylesheet"})}else{u=n("script",{src:q});u.async=false}u.className="lazyload";u.setAttribute("charset","utf-8");if(i.ie&&!D){u.onreadystatechange=function(){if(/loaded|complete/.test(u.readyState)){u.onreadystatechange=null;v()}}}else{if(D&&(i.gecko||i.webkit)){if(i.webkit){s.urls[w]=u.href;e()}else{u.innerHTML='@import "'+q+'";';b(u)}}else{u.onload=u.onerror=v}}r.push(u)}for(w=0,y=r.length;w<y;++w){j.appendChild(r[w])}}function b(r){var q;try{q=!!r.sheet.cssRules}catch(p){g+=1;if(g<200){setTimeout(function(){b(r)},50)}else{q&&k("css")}return}k("css")}function e(){var q=c.css,p;if(q){p=o.length;while(--p>=0){if(o[p].href===q.urls[0]){k("css");break}}g+=1;if(q){if(g<200){setTimeout(e,50)}else{k("css")}}}}return{css:function(r,s,q,p){if(a(r)){return s}else{m("css",r,s,q,p)}},js:function(r,s,q,p){if(a(r)){return s}else{m("js",r,s,q,p)}}}})(this.document)}if(typeof VMM!="undefined"&&typeof VMM.ExternalAPI=="undefined"){VMM.ExternalAPI={pushQues:function(){if(VMM.master_config.googlemaps.active){VMM.ExternalAPI.googlemaps.pushQue()}if(VMM.master_config.youtube.active){VMM.ExternalAPI.youtube.pushQue()}if(VMM.master_config.soundcloud.active){VMM.ExternalAPI.soundcloud.pushQue()}if(VMM.master_config.googledocs.active){VMM.ExternalAPI.googledocs.pushQue()}if(VMM.master_config.googleplus.active){VMM.ExternalAPI.googleplus.pushQue()}if(VMM.master_config.wikipedia.active){VMM.ExternalAPI.wikipedia.pushQue()}if(VMM.master_config.vimeo.active){VMM.ExternalAPI.vimeo.pushQue()}if(VMM.master_config.twitter.active){VMM.ExternalAPI.twitter.pushQue()}if(VMM.master_config.flickr.active){VMM.ExternalAPI.flickr.pushQue()}},twitter:{tweetArray:[],get:function(a,c){var b={mid:a,id:c};VMM.master_config.twitter.que.push(b);VMM.master_config.twitter.active=true},create:function(e,g){var f=e.mid.toString(),b={twitterid:e.mid},a="http://api.twitter.com/1/statuses/show.json?id="+e.mid+"&include_entities=true&callback=?",d=setTimeout(VMM.ExternalAPI.twitter.errorTimeOut,VMM.master_config.timers.api,e),c=setTimeout(g,VMM.master_config.timers.api,e);VMM.getJSON(a,function(i){var k=i.id_str,h="<blockquote><p>",j=VMM.Util.linkify_with_twitter(i.text,"_blank");h+=j;h+="</p></blockquote>";if(typeof i.entities.media!="undefined"){if(i.entities.media[0].type=="photo"){}}h+="<div class='vcard author'>";h+="<a class='screen-name url' href='https://twitter.com/"+i.user.screen_name+"' data-screen-name='"+i.user.screen_name+"' target='_blank'>";h+="<span class='avatar'><img src=' "+i.user.profile_image_url+"'  alt=''></span>";h+="<span class='fn'>"+i.user.name+"</span>";h+="<span class='nickname'>@"+i.user.screen_name+"<span class='thumbnail-inline'></span></span>";h+="</a>";h+="</div>";VMM.attachElement("#"+e.id.toString(),h);VMM.attachElement("#text_thumb_"+e.id.toString(),i.text)}).error(function(h,j,i){trace("TWITTER error");trace("TWITTER ERROR: "+j+" "+h.responseText);VMM.attachElement("#"+e.id,"<p>ERROR LOADING TWEET "+e.mid+"</p>")}).success(function(h){clearTimeout(d);clearTimeout(c);g()})},errorTimeOut:function(a){trace("TWITTER JSON ERROR TIMEOUT "+a.mid);VMM.attachElement("#tweet_"+a.id,"<span class='messege'><p>Still waiting on Twitter: "+a.mid+"</p></span>");VMM.getJSON("http://api.twitter.com/1/account/rate_limit_status.json",function(c){trace("REMAINING TWITTER API CALLS "+c.remaining_hits);trace("TWITTER RATE LIMIT WILL RESET AT "+c.reset_time);var b="";if(c.remaining_hits==0){b="<p>You've reached the maximum number of tweets you can load in an hour.</p>";b+="<p>You can view tweets again starting at: <br/>"+c.reset_time+"</p>"}else{b="<p>Still waiting on Twitter. "+id+"</p>"}VMM.attachElement("#twitter_"+id,"<span class='messege'>"+b+"</span>")})},pushQue:function(){if(VMM.master_config.twitter.que.length>0){VMM.ExternalAPI.twitter.create(VMM.master_config.twitter.que[0],VMM.ExternalAPI.twitter.pushQue);VMM.master_config.twitter.que.remove(0)}},getHTML:function(b){var a="http://api.twitter.com/1/statuses/oembed.json?id="+b+"&callback=?";VMM.getJSON(a,VMM.ExternalAPI.twitter.onJSONLoaded)},onJSONLoaded:function(a){trace("TWITTER JSON LOADED");var b=a.id;VMM.attachElement("#"+b,VMM.Util.linkify_with_twitter(a.html))},parseTwitterDate:function(b){var a=new Date(Date.parse(b));return a},prettyParseTwitterDate:function(b){var a=new Date(Date.parse(b));return VMM.Date.prettyDate(a,true)},getTweets:function(f){var e=[];var d=f.length;for(var c=0;c<f.length;c++){var b="";if(f[c].tweet.match("status/")){b=f[c].tweet.split("status/")[1]}else{if(f[c].tweet.match("statuses/")){b=f[c].tweet.split("statuses/")[1]}else{b=""}}var a="http://api.twitter.com/1/statuses/show.json?id="+b+"&include_entities=true&callback=?";VMM.getJSON(a,function(i){var h={};var g="<div class='twitter'><blockquote><p>";var k=VMM.Util.linkify_with_twitter(i.text,"_blank");g+=k;g+="</p>";g+="— "+i.user.name+" (<a href='https://twitter.com/"+i.user.screen_name+"'>@"+i.user.screen_name+"</a>) <a href='https://twitter.com/"+i.user.screen_name+"/status/"+i.id+"'>"+VMM.ExternalAPI.twitter.prettyParseTwitterDate(i.created_at)+" </a></blockquote></div>";h.content=g;h.raw=i;e.push(h);if(e.length==d){var j={tweetdata:e};VMM.fireEvent(global,"TWEETSLOADED",j)}}).success(function(){trace("second success")}).error(function(){trace("error")}).complete(function(){trace("complete")})}},getTweetSearch:function(e,c){var b=40;if(c!=null&&c!=""){b=c}var a="http://search.twitter.com/search.json?q="+e+"&rpp="+b+"&include_entities=true&result_type=mixed";var d=[];VMM.getJSON(a,function(j){for(var f=0;f<j.results.length;f++){var h={};var g="<div class='twitter'><blockquote><p>";var l=VMM.Util.linkify_with_twitter(j.results[f].text,"_blank");g+=l;g+="</p>";g+="— "+j.results[f].from_user_name+" (<a href='https://twitter.com/"+j.results[f].from_user+"'>@"+j.results[f].from_user+"</a>) <a href='https://twitter.com/"+j.results[f].from_user+"/status/"+j.id+"'>"+VMM.ExternalAPI.twitter.prettyParseTwitterDate(j.results[f].created_at)+" </a></blockquote></div>";h.content=g;h.raw=j.results[f];d.push(h)}var k={tweetdata:d};VMM.fireEvent(global,"TWEETSLOADED",k)})},prettyHTML:function(e,b){var e=e.toString();var c={twitterid:e};var a="http://api.twitter.com/1/statuses/show.json?id="+e+"&include_entities=true&callback=?";var d=setTimeout(VMM.ExternalAPI.twitter.errorTimeOut,VMM.master_config.timers.api,e);VMM.getJSON(a,VMM.ExternalAPI.twitter.formatJSON).error(function(f,h,g){trace("TWITTER error");trace("TWITTER ERROR: "+h+" "+f.responseText);VMM.attachElement("#twitter_"+e,"<p>ERROR LOADING TWEET "+e+"</p>")}).success(function(f){clearTimeout(d);if(b){VMM.ExternalAPI.twitter.secondaryMedia(f)}})},formatJSON:function(b){var e=b.id_str;var a="<blockquote><p>";var c=VMM.Util.linkify_with_twitter(b.text,"_blank");a+=c;a+="</p></blockquote>";a+="<div class='vcard author'>";a+="<a class='screen-name url' href='https://twitter.com/"+b.user.screen_name+"' data-screen-name='"+b.user.screen_name+"' target='_blank'>";a+="<span class='avatar'><img src=' "+b.user.profile_image_url+"'  alt=''></span>";a+="<span class='fn'>"+b.user.name+"</span>";a+="<span class='nickname'>@"+b.user.screen_name+"<span class='thumbnail-inline'></span></span>";a+="</a>";a+="</div>";if(typeof b.entities.media!="undefined"){if(b.entities.media[0].type=="photo"){a+="<img src=' "+b.entities.media[0].media_url+"'  alt=''>"}}VMM.attachElement("#twitter_"+e.toString(),a);VMM.attachElement("#text_thumb_"+e.toString(),b.text)}},googlemaps:{get:function(a,g){var f,b,e;e=VMM.Util.getUrlVars(a);if(VMM.master_config.Timeline.api_keys.google!=""){b=VMM.master_config.Timeline.api_keys.google}else{b=Aes.Ctr.decrypt(VMM.master_config.api_keys_master.google,VMM.master_config.vp,256)}var d="http://maps.googleapis.com/maps/api/js?key="+b+"&libraries=places&sensor=false&callback=VMM.ExternalAPI.googlemaps.onMapAPIReady";var c={url:a,vars:e,id:g};if(VMM.master_config.googlemaps.active){VMM.master_config.googlemaps.que.push(c)}else{VMM.master_config.googlemaps.que.push(c);if(VMM.master_config.googlemaps.api_loaded){}else{VMM.LoadLib.js(d,function(){trace("Google Maps API Library Loaded")})}}},create:function(d){var h="";var i;var c;function f(m){if(m in VMM.ExternalAPI.googlemaps.map_providers){h=VMM.ExternalAPI.googlemaps.map_attribution[VMM.ExternalAPI.googlemaps.map_providers[m].attribution];return VMM.ExternalAPI.googlemaps.map_providers[m]}else{if(VMM.ExternalAPI.googlemaps.defaultType(m)){trace("GOOGLE MAP DEFAULT TYPE");return google.maps.MapTypeId[m.toUpperCase()]}else{trace("Not a maptype: "+m)}}}google.maps.VeriteMapType=function(m){if(VMM.ExternalAPI.googlemaps.defaultType(m)){return google.maps.MapTypeId[m.toUpperCase()]}else{var q=f(m);return google.maps.ImageMapType.call(this,{getTileUrl:function(t,s){var r=(s+t.x+t.y)%VMM.ExternalAPI.googlemaps.map_subdomains.length;return[q.url.replace("{S}",VMM.ExternalAPI.googlemaps.map_subdomains[r]).replace("{Z}",s).replace("{X}",t.x).replace("{Y}",t.y).replace("{z}",s).replace("{x}",t.x).replace("{y}",t.y)]},tileSize:new google.maps.Size(256,256),name:m,minZoom:q.minZoom,maxZoom:q.maxZoom})}};google.maps.VeriteMapType.prototype=new google.maps.ImageMapType("_");if(type.of(VMM.master_config.Timeline.maptype)=="string"){if(VMM.ExternalAPI.googlemaps.defaultType(VMM.master_config.Timeline.maptype)){i=google.maps.MapTypeId[VMM.master_config.Timeline.maptype.toUpperCase()]}else{i=VMM.master_config.Timeline.maptype}}else{i="toner"}var n=new google.maps.LatLng(41.875696,-87.624207);var e;var p=11;var o=false;var a=false;var b;if(type.of(VMM.Util.getUrlVars(d.url)["ll"])=="string"){o=true;e=VMM.Util.getUrlVars(d.url)["ll"].split(",");n=new google.maps.LatLng(parseFloat(e[0]),parseFloat(e[1]))}else{if(type.of(VMM.Util.getUrlVars(d.url)["sll"])=="string"){e=VMM.Util.getUrlVars(d.url)["sll"].split(",");n=new google.maps.LatLng(parseFloat(e[0]),parseFloat(e[1]))}}if(type.of(VMM.Util.getUrlVars(d.url)["z"])=="string"){a=true;p=parseFloat(VMM.Util.getUrlVars(d.url)["z"])}var k={zoom:p,disableDefaultUI:true,mapTypeControl:false,zoomControl:true,zoomControlOptions:{style:google.maps.ZoomControlStyle.SMALL,position:google.maps.ControlPosition.TOP_RIGHT},center:n,mapTypeId:i,mapTypeControlOptions:{mapTypeIds:[i]}};var j=d.id.toString()+"_gmap";VMM.attachElement("#"+d.id,"<div class='google-map' id='"+j+"' style='width=100%;height=100%;'></div>");var c=new google.maps.Map(document.getElementById(j),k);if(VMM.ExternalAPI.googlemaps.defaultType(VMM.master_config.Timeline.maptype)){}else{c.mapTypes.set(i,new google.maps.VeriteMapType(i));var l="<div class='map-attribution'><div class='attribution-text'>"+h+"</div></div>";VMM.appendElement("#"+j,l)}g();function g(){var m=d.url+"&output=kml";m=m.replace("&output=embed","");var q=new google.maps.KmlLayer(m,{preserveViewport:true});var r=new google.maps.InfoWindow();q.setMap(c);google.maps.event.addListenerOnce(q,"defaultviewport_changed",function(){c.fitBounds(q.getDefaultViewport());if(o){c.panTo(n)}if(a){c.setZoom(p)}});google.maps.event.addListener(q,"click",function(u){var t=u.featureData.description;s(t);function s(v){r.setContent(v);r.open(c)}})}},pushQue:function(){for(var a=0;a<VMM.master_config.googlemaps.que.length;a++){VMM.ExternalAPI.googlemaps.create(VMM.master_config.googlemaps.que[a])}VMM.master_config.googlemaps.que=[]},onMapAPIReady:function(){VMM.master_config.googlemaps.map_active=true;VMM.master_config.googlemaps.places_active=true;VMM.ExternalAPI.googlemaps.onAPIReady()},onPlacesAPIReady:function(){VMM.master_config.googlemaps.places_active=true;VMM.ExternalAPI.googlemaps.onAPIReady()},onAPIReady:function(){if(!VMM.master_config.googlemaps.active){if(VMM.master_config.googlemaps.map_active&&VMM.master_config.googlemaps.places_active){VMM.master_config.googlemaps.active=true;VMM.ExternalAPI.googlemaps.pushQue()}}},defaultType:function(a){if(a.toLowerCase()=="satellite"||a.toLowerCase()=="hybrid"||a.toLowerCase()=="terrain"||a.toLowerCase()=="roadmap"){return true}else{return false}},map_subdomains:["","a.","b.","c.","d."],map_attribution:{stamen:"Map tiles by <a href='http://stamen.com'>Stamen Design</a>, under <a href='http://creativecommons.org/licenses/by/3.0'>CC BY 3.0</a>. Data by <a href='http://openstreetmap.org'>OpenStreetMap</a>, under <a href='http://creativecommons.org/licenses/by-sa/3.0'>CC BY SA</a>.",apple:"Map data &copy; 2012  Apple, Imagery &copy; 2012 Apple"},map_providers:{toner:{url:"http://{S}tile.stamen.com/toner/{Z}/{X}/{Y}.png",minZoom:0,maxZoom:20,attribution:"stamen"},"toner-lines":{url:"http://{S}tile.stamen.com/toner-lines/{Z}/{X}/{Y}.png",minZoom:0,maxZoom:20,attribution:"stamen"},"toner-labels":{url:"http://{S}tile.stamen.com/toner-labels/{Z}/{X}/{Y}.png",minZoom:0,maxZoom:20,attribution:"stamen"},sterrain:{url:"http://{S}tile.stamen.com/terrain/{Z}/{X}/{Y}.jpg",minZoom:4,maxZoom:20,attribution:"stamen"},apple:{url:"http://gsp2.apple.com/tile?api=1&style=slideshow&layers=default&lang=en_US&z={z}&x={x}&y={y}&v=9",minZoom:4,maxZoom:14,attribution:"apple"},watercolor:{url:"http://{S}tile.stamen.com/watercolor/{Z}/{X}/{Y}.jpg",minZoom:3,maxZoom:16,attribution:"stamen"}}},googleplus:{get:function(b,d){var c;var a={user:b,activity:d};VMM.master_config.googleplus.que.push(a);VMM.master_config.googleplus.active=true},create:function(e,g){var d="",h="",c="",i="",a="",b,f;googleplus_timeout=setTimeout(VMM.ExternalAPI.googleplus.errorTimeOut,VMM.master_config.timers.api,e),callback_timeout=setTimeout(g,VMM.master_config.timers.api,e);if(VMM.master_config.Timeline.api_keys.google!=""){h=VMM.master_config.Timeline.api_keys.google}else{h=Aes.Ctr.decrypt(VMM.master_config.api_keys_master.google,VMM.master_config.vp,256)}b="https://www.googleapis.com/plus/v1/people/"+e.user+"/activities/public?alt=json&maxResults=100&fields=items(id,url)&key="+h;d="GOOGLE PLUS API CALL";VMM.getJSON(b,function(k){for(var j=0;j<k.items.length;j++){trace("loop");if(k.items[j].url.split("posts/")[1]==e.activity){trace("FOUND IT!!");c=k.items[j].id;f="https://www.googleapis.com/plus/v1/activities/"+c+"?alt=json&key="+h;VMM.getJSON(f,function(m){trace(m);if(typeof m.annotation!="undefined"){i+="<div class='googleplus-annotation'>'"+m.annotation+"</div>";i+=m.object.content}else{i+=m.object.content}if(typeof m.object.attachments!="undefined"){for(var l=0;l<m.object.attachments.length;l++){if(m.object.attachments[l].objectType=="photo"){a="<a href='"+m.object.url+"' target='_blank'><img src='"+m.object.attachments[l].image.url+"' class='article-thumb'></a>"+a}else{if(m.object.attachments[l].objectType=="video"){a="<img src='"+m.object.attachments[l].image.url+"' class='article-thumb'>"+a;a+="<div>";a+="<a href='"+m.object.attachments[l].url+"' target='_blank'>";a+="<h5>"+m.object.attachments[l].displayName+"</h5>";a+="</a>";a+="</div>"}else{if(m.object.attachments[l].objectType=="article"){a+="<div>";a+="<a href='"+m.object.attachments[l].url+"' target='_blank'>";a+="<h5>"+m.object.attachments[l].displayName+"</h5>";a+="<p>"+m.object.attachments[l].content+"</p>";a+="</a>";a+="</div>"}}}trace(m.object.attachments[l])}a="<div class='googleplus-attachments'>"+a+"</div>"}d="<div class='googleplus-content'>"+i+a+"</div>";d+="<div class='vcard author'><a class='screen-name url' href='"+m.url+"' target='_blank'>";d+="<span class='avatar'><img src='"+m.actor.image.url+"' style='max-width: 32px; max-height: 32px;'></span>";d+="<span class='fn'>"+m.actor.displayName+"</span>";d+="<span class='nickname'><span class='thumbnail-inline'></span></span>";d+="</a></div>";VMM.attachElement("#googleplus_"+e.activity,d)});break}}}).error(function(k,m,l){var j=VMM.parseJSON(k.responseText);trace(j.error.message);VMM.attachElement("#googleplus_"+e.activity,"<p>ERROR LOADING GOOGLE+ </p><p>"+j.error.message+"</p>")}).success(function(j){clearTimeout(googleplus_timeout);clearTimeout(callback_timeout);g()})},pushQue:function(){if(VMM.master_config.googleplus.que.length>0){VMM.ExternalAPI.googleplus.create(VMM.master_config.googleplus.que[0],VMM.ExternalAPI.googleplus.pushQue);VMM.master_config.googleplus.que.remove(0)}},errorTimeOut:function(a){trace("GOOGLE+ JSON ERROR TIMEOUT "+a.activity);VMM.attachElement("#googleplus_"+a.activity,"<p>Still waiting on GOOGLE+ </p><p>"+a.activity+"</p>")}},googledocs:{get:function(a,c){var b={url:a,id:c};VMM.master_config.googledocs.que.push(b);VMM.master_config.googledocs.active=true},create:function(b){var a="";if(b.url.match(/docs.google.com/i)){a="<iframe class='doc' frameborder='0' width='100%' height='100%' src='"+b.url+"&amp;embedded=true'></iframe>"}else{a="<iframe class='doc' frameborder='0' width='100%' height='100%' src='http://docs.google.com/viewer?url="+b.url+"&amp;embedded=true'></iframe>"}VMM.attachElement("#"+b.id,a)},pushQue:function(){for(var a=0;a<VMM.master_config.googledocs.que.length;a++){VMM.ExternalAPI.googledocs.create(VMM.master_config.googledocs.que[a])}VMM.master_config.googledocs.que=[]}},flickr:{get:function(b,c){var a={mid:b,id:c};VMM.master_config.flickr.que.push(a);VMM.master_config.flickr.active=true},create:function(b,e){var d,c=setTimeout(e,VMM.master_config.timers.api,b);if(VMM.master_config.Timeline.api_keys.flickr!=""){d=VMM.master_config.Timeline.api_keys.flickr}else{d=Aes.Ctr.decrypt(VMM.master_config.api_keys_master.flickr,VMM.master_config.vp,256)}var a="http://api.flickr.com/services/rest/?method=flickr.photos.getSizes&api_key="+d+"&photo_id="+b.mid+"&format=json&jsoncallback=?";VMM.getJSON(a,function(l){var m=l.sizes.size[0].url.split("photos/")[1].split("/")[1];var g="#"+b.id,j="#"+b.id+"_thumb";var o,n,k=false,f="Large";f=VMM.ExternalAPI.flickr.sizes(VMM.master_config.sizes.api.height);for(var h=0;h<l.sizes.size.length;h++){if(l.sizes.size[h].label==f){k=true;o=l.sizes.size[h].source}}if(!k){o=l.sizes.size[l.sizes.size.length-1].source}n=l.sizes.size[0].source;VMM.Lib.attr(g,"src",o);VMM.attachElement(j,"<img src='"+n+"'>")}).error(function(f,h,g){trace("FLICKR error");trace("FLICKR ERROR: "+h+" "+f.responseText)}).success(function(f){clearTimeout(c);e()})},pushQue:function(){if(VMM.master_config.flickr.que.length>0){VMM.ExternalAPI.flickr.create(VMM.master_config.flickr.que[0],VMM.ExternalAPI.flickr.pushQue);VMM.master_config.flickr.que.remove(0)}},sizes:function(b){var a="";if(b<=75){a="Thumbnail"}else{if(b<=180){a="Small"}else{if(b<=240){a="Small 320"}else{if(b<=375){a="Medium"}else{if(b<=480){a="Medium 640"}else{if(b<=600){a="Medium 800"}else{a="Large"}}}}}}return a}},instagram:{get:function(b,a){if(a){return"http://instagr.am/p/"+b+"/media/?size=t"}else{return"http://instagr.am/p/"+b+"/media/?size="+VMM.ExternalAPI.instagram.sizes(VMM.master_config.sizes.api.height)}},sizes:function(b){var a="";if(b<=150){a="t"}else{if(b<=306){a="m"}else{a="l"}}return a}},soundcloud:{get:function(a,c){var b={mid:a,id:c};VMM.master_config.soundcloud.que.push(b);VMM.master_config.soundcloud.active=true},create:function(b,c){var a="http://soundcloud.com/oembed?url="+b.mid+"&format=js&callback=?";VMM.getJSON(a,function(e){VMM.attachElement("#"+b.id,e.html);c()})},pushQue:function(){if(VMM.master_config.soundcloud.que.length>0){VMM.ExternalAPI.soundcloud.create(VMM.master_config.soundcloud.que[0],VMM.ExternalAPI.soundcloud.pushQue);VMM.master_config.soundcloud.que.remove(0)}}},wikipedia:{get:function(b,d,c){var a={url:b,id:d,lang:c};VMM.master_config.wikipedia.que.push(a);VMM.master_config.wikipedia.active=true},create:function(b,d){var a="http://"+b.lang+".wikipedia.org/w/api.php?action=query&prop=extracts&redirects=&titles="+b.url+"&exintro=1&format=json&callback=?";callback_timeout=setTimeout(d,VMM.master_config.timers.api,b);if(VMM.Browser.browser=="Explorer"&&parseInt(VMM.Browser.version,10)>=7&&window.XDomainRequest){var c="<h4><a href='http://"+VMM.master_config.language.api.wikipedia+".wikipedia.org/wiki/"+b.url+"' target='_blank'>"+b.url+"</a></h4>";c+="<span class='wiki-source'>"+VMM.master_config.language.messages.wikipedia+"</span>";c+="<p>Wikipedia entry unable to load using Internet Explorer 8 or below.</p>";VMM.attachElement("#"+b.id,c)}VMM.getJSON(a,function(m){if(m.query){var g,f,e="",l="",j=1,k=[];g=VMM.Util.getObjectAttributeByIndex(m.query.pages,0).extract;f=VMM.Util.getObjectAttributeByIndex(m.query.pages,0).title;if(g.match("<p>")){k=g.split("<p>")}else{k.push(g)}for(var h=0;h<k.length;h++){if(h+1<=j&&h+1<k.length){l+="<p>"+k[h+1]}}e="<h4><a href='http://"+VMM.master_config.language.api.wikipedia+".wikipedia.org/wiki/"+f+"' target='_blank'>"+f+"</a></h4>";e+="<span class='wiki-source'>"+VMM.master_config.language.messages.wikipedia+"</span>";e+=VMM.Util.linkify_wikipedia(l);if(g.match("REDIRECT")){}else{VMM.attachElement("#"+b.id,e)}}}).error(function(e,g,f){trace("WIKIPEDIA error");trace("WIKIPEDIA ERROR: "+g+" "+e.responseText);trace(f);VMM.attachElement("#"+b.id,"<span class='messege'><p>Wikipedia is not responding</p></span>");clearTimeout(callback_timeout);if(VMM.master_config.wikipedia.tries<4){trace("WIKIPEDIA ATTEMPT "+VMM.master_config.wikipedia.tries);trace(b);VMM.master_config.wikipedia.tries++;VMM.ExternalAPI.wikipedia.create(b,d)}else{d()}}).success(function(e){VMM.master_config.wikipedia.tries=0;clearTimeout(callback_timeout);d()})},pushQue:function(){if(VMM.master_config.wikipedia.que.length>0){trace("WIKIPEDIA PUSH QUE "+VMM.master_config.wikipedia.que.length);VMM.ExternalAPI.wikipedia.create(VMM.master_config.wikipedia.que[0],VMM.ExternalAPI.wikipedia.pushQue);VMM.master_config.wikipedia.que.remove(0)}}},youtube:{get:function(c,d){var b="http://gdata.youtube.com/feeds/api/videos/"+c+"?v=2&alt=jsonc&callback=?",a={mid:c,id:d};VMM.master_config.youtube.que.push(a);if(!VMM.master_config.youtube.active){if(!VMM.master_config.youtube.api_loaded){VMM.LoadLib.js("http://www.youtube.com/player_api",function(){trace("YouTube API Library Loaded")})}}VMM.getJSON(b,function(e){VMM.ExternalAPI.youtube.createThumb(e,a)})},create:function(a){var b={active:false,player:{},name:a.id,playing:false};b.player[a.id]=new YT.Player(a.id,{height:"390",width:"640",playerVars:{enablejsapi:1,color:"white",showinfo:0,theme:"light",rel:0},videoId:a.mid,events:{onReady:VMM.ExternalAPI.youtube.onPlayerReady,onStateChange:VMM.ExternalAPI.youtube.onStateChange}});VMM.master_config.youtube.array.push(b)},createThumb:function(c,a){trace("CREATE THUMB");trace(c);trace(a);if(typeof c.data!="undefined"){var b="#"+a.id+"_thumb";VMM.attachElement(b,"<img src='"+c.data.thumbnail.sqDefault+"'>")}},pushQue:function(){for(var a=0;a<VMM.master_config.youtube.que.length;a++){VMM.ExternalAPI.youtube.create(VMM.master_config.youtube.que[a])}VMM.master_config.youtube.que=[]},onAPIReady:function(){VMM.master_config.youtube.active=true;VMM.ExternalAPI.youtube.pushQue()},stopPlayers:function(){for(var a=0;a<VMM.master_config.youtube.array.length;a++){if(VMM.master_config.youtube.array[a].playing){var b=VMM.master_config.youtube.array[a].name;VMM.master_config.youtube.array[a].player[b].stopVideo()}}},onStateChange:function(b){for(var a=0;a<VMM.master_config.youtube.array.length;a++){var c=VMM.master_config.youtube.array[a].name;if(VMM.master_config.youtube.array[a].player[c]==b.target){if(b.data==YT.PlayerState.PLAYING){VMM.master_config.youtube.array[a].playing=true}}}},onPlayerReady:function(a){}},vimeo:{get:function(b,c){var a={mid:b,id:c};VMM.master_config.vimeo.que.push(a);VMM.master_config.vimeo.active=true},create:function(b,c){trace("VIMEO CREATE");var a="http://vimeo.com/api/v2/video/"+b.mid+".json";VMM.getJSON(a,function(e){VMM.ExternalAPI.vimeo.createThumb(e,b);c()})},createThumb:function(c,a){trace("VIMEO CREATE THUMB");var b="#"+a.id+"_thumb";VMM.attachElement(b,"<img src='"+c[0].thumbnail_small+"'>")},pushQue:function(){if(VMM.master_config.vimeo.que.length>0){VMM.ExternalAPI.vimeo.create(VMM.master_config.vimeo.que[0],VMM.ExternalAPI.vimeo.pushQue);VMM.master_config.vimeo.que.remove(0)}}}}}function onYouTubePlayerAPIReady(){trace("GLOBAL YOUTUBE API CALLED");VMM.ExternalAPI.youtube.onAPIReady()}if(typeof VMM!="undefined"&&typeof VMM.MediaElement=="undefined"){VMM.MediaElement=({init:function(){return this},thumbnail:function(d,k,e,g){var j=16,c=24,i="";if(k!=null&&k!=""){j=k}if(e!=null&&e!=""){c=e}if(g!=null&&g!=""){i=g}if(d.media!=null&&d.media!=""){var a=true,f="",b=VMM.MediaType(d.media);if(b.type=="image"){f="<div class='thumbnail thumb-photo'></div>";return f}else{if(b.type=="flickr"){f="<div class='thumbnail thumb-photo' id='"+g+"_thumb'></div>";return f}else{if(b.type=="instagram"){f="<div class='thumbnail thumb-instagram' id='"+g+"_thumb'><img src='"+VMM.ExternalAPI.instagram.get(b.id,true)+"'></div>";return f}else{if(b.type=="youtube"){f="<div class='thumbnail thumb-youtube' id='"+g+"_thumb'></div>";return f}else{if(b.type=="googledoc"){f="<div class='thumbnail thumb-document'></div>";return f}else{if(b.type=="vimeo"){f="<div class='thumbnail thumb-vimeo' id='"+g+"_thumb'></div>";return f}else{if(b.type=="dailymotion"){f="<div class='thumbnail thumb-video'></div>";return f}else{if(b.type=="twitter"){f="<div class='thumbnail thumb-twitter'></div>";return f}else{if(b.type=="twitter-ready"){f="<div class='thumbnail thumb-twitter'></div>";return f}else{if(b.type=="soundcloud"){f="<div class='thumbnail thumb-audio'></div>";return f}else{if(b.type=="google-map"){f="<div class='thumbnail thumb-map'></div>";return f}else{if(b.type=="googleplus"){f="<div class='thumbnail thumb-googleplus'></div>";return f}else{if(b.type=="wikipedia"){f="<div class='thumbnail thumb-wikipedia'></div>";return f}else{if(b.type=="storify"){f="<div class='thumbnail thumb-storify'></div>";return f}else{if(b.type=="quote"){f="<div class='thumbnail thumb-quote'></div>";return f}else{if(b.type=="unknown"){if(b.id.match("blockquote")){f="<div class='thumbnail thumb-quote'></div>"}else{f="<div class='thumbnail thumb-plaintext'></div>"}return f}else{if(b.type=="website"){f="<div class='thumbnail thumb-website'></div>";return f}else{f="<div class='thumbnail thumb-plaintext'></div>";return f}}}}}}}}}}}}}}}}}}},create:function(d,f){var b=false,a="<span class='messege'><p>"+VMM.master_config.language.messages.loading+"</p></span>";if(d.media!=null&&d.media!=""){var e="",h="",i="",j="",g=false,c;c=VMM.MediaType(d.media);b=true;if(d.credit!=null&&d.credit!=""){i="<div class='credit'>"+VMM.Util.linkify_with_twitter(d.credit,"_blank")+"</div>"}if(d.caption!=null&&d.caption!=""){h="<div class='caption'>"+VMM.Util.linkify_with_twitter(d.caption,"_blank")+"</div>"}if(c.type=="image"){e="<div class='media-image media-shadow'><img src='"+c.id+"' class='media-image'></div>"}else{if(c.type=="flickr"){e="<div class='media-image media-shadow'><a href='"+c.link+"' target='_blank'><img id='"+f+"'></a></div>";VMM.ExternalAPI.flickr.get(c.id,f)}else{if(c.type=="instagram"){e="<div class='media-image media-shadow'><a href='"+c.link+"' target='_blank'><img src='"+VMM.ExternalAPI.instagram.get(c.id)+"'></a></div>"}else{if(c.type=="googledoc"){e="<div class='media-frame media-shadow doc' id='"+f+"'>"+a+"</div>";VMM.ExternalAPI.googledocs.get(c.id,f)}else{if(c.type=="youtube"){e="<div class='media-shadow'><div class='media-frame video youtube' id='"+f+"'>"+a+"</div></div>";VMM.ExternalAPI.youtube.get(c.id,f)}else{if(c.type=="vimeo"){e="<div class='media-shadow'><iframe class='media-frame video vimeo' autostart='false' frameborder='0' width='100%' height='100%' src='http://player.vimeo.com/video/"+c.id+"?title=0&amp;byline=0&amp;portrait=0&amp;color=ffffff'></iframe></div>";VMM.ExternalAPI.vimeo.get(c.id,f)}else{if(c.type=="dailymotion"){e="<div class='media-shadow'><iframe class='media-frame video dailymotion' autostart='false' frameborder='0' width='100%' height='100%' src='http://www.dailymotion.com/embed/video/"+c.id+"'></iframe></div>"}else{if(c.type=="twitter"){e="<div class='twitter' id='"+f+"'>"+a+"</div>";g=true;VMM.ExternalAPI.twitter.get(c.id,f)}else{if(c.type=="twitter-ready"){g=true;e=c.id}else{if(c.type=="soundcloud"){e="<div class='media-frame media-shadow soundcloud' id='"+f+"'>"+a+"</div>";VMM.ExternalAPI.soundcloud.get(c.id,f)}else{if(c.type=="google-map"){e="<div class='media-frame media-shadow map' id='"+f+"'>"+a+"</div>";VMM.ExternalAPI.googlemaps.get(c.id,f)}else{if(c.type=="googleplus"){j="googleplus_"+c.id;e="<div class='googleplus' id='"+j+"'>"+a+"</div>";g=true;VMM.ExternalAPI.googleplus.get(c.user,c.id,f)}else{if(c.type=="wikipedia"){e="<div class='wikipedia' id='"+f+"'>"+a+"</div>";g=true;VMM.ExternalAPI.wikipedia.get(c.id,f,c.lang)}else{if(c.type=="storify"){g=true;e="<div class='plain-text-quote'>"+c.id+"</div>"}else{if(c.type=="quote"){g=true;e="<div class='plain-text-quote'>"+c.id+"</div>"}else{if(c.type=="unknown"){trace("NO KNOWN MEDIA TYPE FOUND TRYING TO JUST PLACE THE HTML");g=true;e="<div class='plain-text'><div class='container'>"+VMM.Util.properQuotes(c.id)+"</div></div>"}else{if(c.type=="website"){e="<div class='media-shadow website'><a href='"+c.id+"' target='_blank'><img src='http://api1.thumbalizr.com/?url="+c.id.replace(/[\./]$/g,"")+"&width=300' class='media-image'></a></div>"}else{trace("NO KNOWN MEDIA TYPE FOUND");trace(c.type)}}}}}}}}}}}}}}}}}e="<div class='media-container' >"+e+i+h+"</div>";if(g){return"<div class='text-media'><div class='media-wrapper'>"+e+"</div></div>"}else{return"<div class='media-wrapper'>"+e+"</div>"}}}}).init()}if(typeof VMM!="undefined"&&typeof VMM.MediaType=="undefined"){VMM.MediaType=function(e){var c=false,b={type:"unknown",id:"",link:"",lang:"",uniqueid:VMM.Util.unique_ID(6)};if(e.match("div class='twitter'")){b.type="twitter-ready";b.id=e;c=true}else{if(e.match("(www.)?youtube|youtu.be")){if(e.match("v=")){b.id=VMM.Util.getUrlVars(e)["v"]}else{if(e.match("/embed/")){b.id=e.split("embed/")[1].split(/[?&]/)[0]}else{b.id=e.split(/v\/|v=|youtu\.be\//)[1].split(/[?&]/)[0]}}b.type="youtube";c=true}else{if(e.match("(player.)?vimeo.com")){b.type="vimeo";b.id=e.split(/video\/|\/\/vimeo\.com\//)[1].split(/[?&]/)[0];c=true}else{if(e.match("(www.)?dailymotion.com")){b.id=e.split(/video\/|\/\/dailymotion\.com\//)[1];b.type="dailymotion";c=true}else{if(e.match("(player.)?soundcloud.com")){b.type="soundcloud";b.id=e;c=true}else{if(e.match("(www.)?twitter.com")&&e.match("status")){if(e.match("status/")){b.id=e.split("status/")[1]}else{if(e.match("statuses/")){b.id=e.split("statuses/")[1]}else{b.id=""}}b.type="twitter";c=true}else{if(e.match("maps.google")&&!e.match("staticmap")){b.type="google-map";b.id=e.split(/src=['|"][^'|"]*?['|"]/gi);c=true}else{if(e.match("plus.google")){b.type="googleplus";b.id=e.split("/posts/")[1];if(e.split("/posts/")[0].match("u/0/")){b.user=e.split("u/0/")[1].split("/posts")[0]}else{b.user=e.split("google.com/")[1].split("/posts/")[0]}c=true}else{if(e.match("flickr.com/photos")){b.type="flickr";b.id=e.split("photos/")[1].split("/")[1];b.link=e;c=true}else{if(e.match("instagr.am/p/")){b.type="instagram";b.link=e;b.id=e.split("/p/")[1].split("/")[0];c=true}else{if(e.match(/jpg|jpeg|png|gif/i)||e.match("staticmap")||e.match("yfrog.com")||e.match("twitpic.com")){b.type="image";b.id=e;c=true}else{if(VMM.FileExtention.googleDocType(e)){b.type="googledoc";b.id=e;c=true}else{if(e.match("(www.)?wikipedia.org")){b.type="wikipedia";var a=e.split("wiki/")[1].split("#")[0].replace("_"," ");b.id=a.replace(" ","%20");b.lang=e.split("//")[1].split(".wikipedia")[0];c=true}else{if(e.indexOf("http://")==0){b.type="website";b.id=e;c=true}else{if(e.match("storify")){b.type="storify";b.id=e;c=true}else{if(e.match("blockquote")){b.type="quote";b.id=e;c=true}else{trace("unknown media");b.type="unknown";b.id=e;c=true}}}}}}}}}}}}}}}}if(c){return b}else{trace("No valid media id detected");trace(e)}return false}}if(typeof VMM!="undefined"&&typeof VMM.Media=="undefined"){VMM.Media=function(l,m,g,k){var f={};var d=false;var c={width:720,height:400,content_width:720,content_height:400,ease:"easeInOutExpo",duration:1000,spacing:15};var b="";var o="";var a="";var e="";var j=l;if(m!=null&&m!=""){c.width=m}if(g!=null&&g!=""){c.height=g}this.init=function(h){if(typeof h!="undefined"){this.setData(h)}else{trace("WAITING ON DATA")}};var n=function(q,p,r){b=VMM.appendAndGetElement(j,"<div>","media");o=VMM.appendAndGetElement(b,"<div>","container");a=VMM.appendAndGetElement(o,"<div>","media-container");if(f.media!=null&&f.media!=""){d=true;var h={};h=VMM.MediaType(f.media);if(h.type=="image"){VMM.appendElement(a,"<img src='"+h.id+"'>")}else{if(h.type=="youtube"){VMM.appendElement(a,"<iframe frameborder='0' src='http://www.youtube.com/embed/"+h.id+"?&rel=0&theme=light&showinfo=0&hd=1&autohide=0&color=white' allowfullscreen>")}else{if(h.type=="vimeo"){VMM.appendElement(a,"<iframe frameborder='0' src='http://player.vimeo.com/video/"+h.id+"?title=0&amp;byline=0&amp;portrait=0&amp;color=ffffff'>")}else{}}}if(f.credit!=null&&f.credit!=""){VMM.appendElement(o,VMM.createElement("div",f.credit,"credit"))}if(f.caption!=null&&f.caption!=""){VMM.appendElement(o,VMM.createElement("div",f.caption,"caption"))}}};this.setData=function(h){if(typeof h!="undefined"){f=h;n()}else{trace("NO DATA")}};function i(){}};VMM.Media.prototype.height=function(a){if(a!=null&&a!=""){config.height=a;reSize()}else{return config.height}};VMM.Media.prototype.width=function(a){if(a!=null&&a!=""){config.width=a;reSize()}else{return config.width}};VMM.Media.prototype.getData=function(){return data};VMM.Media.prototype.setConfig=function(a){if(typeof a!="undefined"){config=a}else{trace("NO CONFIG DATA")}};VMM.Media.prototype.getConfig=function(){return config};VMM.Media.prototype.setSize=function(a,b){if(a!=null){config.width=a}if(b!=null){config.height=b}if(_active){reSize()}};VMM.Media.prototype.active=function(){return _active}}if(typeof VMM!="undefined"&&typeof VMM.TextElement=="undefined"){VMM.TextElement=({init:function(){return this},create:function(a){return a}}).init()}if(typeof VMM!="undefined"&&typeof VMM.TouchSlider=="undefined"){VMM.TouchSlider={createPanel:function(g,d,b,f,c,e){VMM.TouchSlider.vertical=false;VMM.TouchSlider.vertical=c;var a=f;VMM.TouchSlider.width=b;VMM.TouchSlider.height=e;VMM.TouchSlider.makeTouchable(g,d)},removePanel:function(a){VMM.unbindEvent(a,VMM.TouchSlider.onTouchStart,"touchstart");VMM.unbindEvent(a,VMM.TouchSlider.onTouchMove,"touchmove");VMM.unbindEvent(a,VMM.TouchSlider.onTouchEnd,"touchend")},makeTouchable:function(b,a){VMM.bindEvent(b,VMM.TouchSlider.onTouchStart,"touchstart",{element:a});VMM.bindEvent(b,VMM.TouchSlider.onTouchMove,"touchmove",{element:a});VMM.bindEvent(b,VMM.TouchSlider.onTouchEnd,"touchend",{element:a})},onTouchStart:function(a){VMM.TouchSlider.touchStart(a.data.element,a);a.stopPropagation();return true},onTouchEnd:function(a){a.stopPropagation();if(VMM.TouchSlider.sliding){VMM.TouchSlider.sliding=false;VMM.TouchSlider.touchEnd(a.data.element,a);return false}else{return true}},onTouchMove:function(a){VMM.TouchSlider.touchMove(a.data.element,a);a.preventDefault();a.stopPropagation();return false},getLeft:function(a){return parseInt(VMM.Lib.css(a,"left").substring(0,VMM.Lib.css(a,"left").length-2),10)},getTop:function(a){return parseInt(VMM.Lib.css(a,"top").substring(0,VMM.Lib.css(a,"top").length-2),10)},touchStart:function(a,b){VMM.Lib.css(a,"-webkit-transition-duration","0");VMM.TouchSlider.startX=b.originalEvent.touches[0].screenX;VMM.TouchSlider.startY=b.originalEvent.touches[0].screenY;VMM.TouchSlider.startLeft=VMM.TouchSlider.getLeft(a);VMM.TouchSlider.startTop=VMM.TouchSlider.getTop(a);VMM.TouchSlider.touchStartTime=new Date().getTime()},touchEnd:function(a,b){if(VMM.TouchSlider.getLeft(a)>0){if(VMM.TouchSlider.vertical){VMM.Lib.animate(a,1000,"",{top:0})}else{VMM.Lib.animate(a,1000,"",{left:0})}VMM.TouchSlider.startX=null;VMM.TouchSlider.startY=null;VMM.fireEvent(a,"TOUCHUPDATE",[0])}else{VMM.TouchSlider.slideMomentum(a,b)}},slideMomentum:function(b,g){var d=(new Date().getTime()-VMM.TouchSlider.touchStartTime)*10;var c=d;var a=VMM.TouchSlider.getLeft(b);var j=VMM.TouchSlider.getTop(b);var n=6000*(Math.abs(VMM.TouchSlider.startLeft)-Math.abs(a));var l=6000*(Math.abs(VMM.TouchSlider.startTop)-Math.abs(j));d=Math.round(n/d);slideAdjustY=Math.round(l/d);var k=d+a;var h=slideAdjustY+j;var i=h%VMM.TouchSlider.height;var m=k%VMM.TouchSlider.width;var f={top:Math.min(0,h),left:Math.min(0,k),time:c};VMM.fireEvent(b,"TOUCHUPDATE",[f]);VMM.TouchSlider.startX=null;VMM.TouchSlider.startY=null},doSlide:function(b,a,c){VMM.Lib.css(b,"-webkit-transition-property","left");VMM.Lib.css(b,"-webkit-transition-duration",c);VMM.Lib.css(b,"left",a)},touchMove:function(a,d){if(!VMM.TouchSlider.sliding){}VMM.TouchSlider.sliding=true;if(VMM.TouchSlider.vertical){if(VMM.TouchSlider.startY>d.originalEvent.touches[0].screenY){VMM.Lib.css(a,"top",-(VMM.TouchSlider.startY-d.originalEvent.touches[0].screenY-VMM.TouchSlider.startTop));VMM.TouchSlider.slidingTop=true}else{var c=(d.originalEvent.touches[0].screenY-VMM.TouchSlider.startY+VMM.TouchSlider.startTop);VMM.Lib.css(a,"top",-(VMM.TouchSlider.startY-d.originalEvent.touches[0].screenY-VMM.TouchSlider.startTop));VMM.TouchSlider.slidingTop=false}}else{if(VMM.TouchSlider.startX>d.originalEvent.touches[0].screenX){VMM.Lib.css(a,"left",-(VMM.TouchSlider.startX-d.originalEvent.touches[0].screenX-VMM.TouchSlider.startLeft));VMM.TouchSlider.slidingLeft=true}else{var b=(d.originalEvent.touches[0].screenX-VMM.TouchSlider.startX+VMM.TouchSlider.startLeft);VMM.Lib.css(a,"left",-(VMM.TouchSlider.startX-d.originalEvent.touches[0].screenX-VMM.TouchSlider.startLeft));VMM.TouchSlider.slidingLeft=false}}}}}if(typeof VMM!="undefined"&&typeof VMM.DragSlider=="undefined"){VMM.DragSlider={createPanel:function(f,c,b,e,d){var a=e;VMM.DragSlider.width=b;VMM.DragSlider.makeDraggable(f,c);VMM.DragSlider.drag_elem=f;VMM.DragSlider.sticky=d},makeDraggable:function(b,a){VMM.bindEvent(b,VMM.DragSlider.onDragStart,"mousedown",{element:a,delement:b});VMM.bindEvent(b,VMM.DragSlider.onDragEnd,"mouseup",{element:a,delement:b});VMM.bindEvent(b,VMM.DragSlider.onDragLeave,"mouseleave",{element:a,delement:b})},cancelSlide:function(a){VMM.unbindEvent(VMM.DragSlider.drag_elem,VMM.DragSlider.onDragMove,"mousemove");return true},onDragLeave:function(a){VMM.unbindEvent(a.data.delement,VMM.DragSlider.onDragMove,"mousemove");a.preventDefault();a.stopPropagation();return true},onDragStart:function(a){VMM.DragSlider.dragStart(a.data.element,a.data.delement,a);a.preventDefault();a.stopPropagation();return true},onDragEnd:function(a){a.preventDefault();a.stopPropagation();if(VMM.DragSlider.sliding){VMM.DragSlider.sliding=false;VMM.DragSlider.dragEnd(a.data.element,a.data.delement,a);return false}else{return true}},onDragMove:function(a){VMM.DragSlider.dragMove(a.data.element,a);a.preventDefault();a.stopPropagation();return false},dragStart:function(b,a,d){VMM.DragSlider.startX=d.pageX;VMM.DragSlider.startLeft=VMM.DragSlider.getLeft(b);VMM.DragSlider.dragStartTime=new Date().getTime();VMM.DragSlider.dragWidth=VMM.Lib.width(a);var c=Math.round(VMM.DragSlider.startX-d.pageX-VMM.DragSlider.startLeft);VMM.Lib.stop(b);VMM.bindEvent(a,VMM.DragSlider.onDragMove,"mousemove",{element:b})},dragEnd:function(b,a,c){VMM.unbindEvent(a,VMM.DragSlider.onDragMove,"mousemove");if(VMM.DragSlider.getLeft(b)>0){}else{VMM.DragSlider.dragMomentum(b,c)}},dragMove:function(a,c){if(!VMM.DragSlider.sliding){}VMM.DragSlider.sliding=true;if(VMM.DragSlider.startX>c.pageX){VMM.Lib.css(a,"left",-(VMM.DragSlider.startX-c.pageX-VMM.DragSlider.startLeft));VMM.DragSlider.slidingLeft=true}else{var b=(c.pageX-VMM.DragSlider.startX+VMM.DragSlider.startLeft);VMM.Lib.css(a,"left",-(VMM.DragSlider.startX-c.pageX-VMM.DragSlider.startLeft));VMM.DragSlider.slidingLeft=false}},dragMomentum:function(c,h){var f=(new Date().getTime()-VMM.DragSlider.dragStartTime)*10;var d=f;var b=VMM.DragSlider.getLeft(c);var j=6000*(Math.abs(VMM.DragSlider.startLeft)-Math.abs(b));f=Math.round(j/f);var i=b+f;var k=i%VMM.DragSlider.width;var g={left:Math.min(i),time:d};VMM.fireEvent(c,"DRAGUPDATE",[g]);var a="easeOutExpo";if(g.time>0){VMM.Lib.animate(c,g.time,a,{left:g.left})}},getLeft:function(a){return parseInt(VMM.Lib.css(a,"left").substring(0,VMM.Lib.css(a,"left").length-2),10)}}}if(typeof VMM!="undefined"&&typeof VMM.Slider=="undefined"){VMM.Slider=function(k,s){var w={},B;var l,x,h,o;var L=[],d=[],A=[];var u="";var H=0;var I=960;var J={move:false,x:10,y:0,off:0,dampen:48};var j="";var c=false;var z=k;var n={nextBtn:"",prevBtn:"",nextDate:"",prevDate:"",nextTitle:"",prevTitle:""};var y;if(typeof VMM.Timeline!="undefined"){B=VMM.Timeline.Config}else{B={preload:4,current_slide:0,interval:10,something:0,width:720,height:400,ease:"easeInOutExpo",duration:1000,timeline:false,spacing:15,slider:{width:720,height:400,content:{width:720,height:400,padding:130},nav:{width:100,height:200}}}}this.ver="0.6";B.slider.width=B.width;B.slider.height=B.height;this.init=function(M){d=[];A=[];if(typeof M!="undefined"){this.setData(M)}else{trace("WAITING ON DATA")}};this.width=function(M){if(M!=null&&M!=""){B.slider.width=M;i()}else{return B.slider.width}};this.height=function(M){if(M!=null&&M!=""){B.slider.height=M;i()}else{return B.slider.height}};this.setData=function(M){if(typeof M!="undefined"){L=M;D()}else{trace("NO DATA")}};this.getData=function(){return L};this.setConfig=function(M){if(typeof M!="undefined"){B=M}else{trace("NO CONFIG DATA")}};this.getConfig=function(){return B};this.setSize=function(M,N){if(M!=null){B.slider.width=M}if(N!=null){B.slider.height=N}if(c){i()}};this.active=function(){return c};this.getCurrentNumber=function(){return H};this.setSlide=function(M){G(M)};function g(){trace("onConfigSet")}function i(P,O){var N=true;var Q=false;if(P!=null){N=P}if(O!=null){Q=O}I=B.slider.width;B.slider.nav.height=VMM.Lib.height(n.prevBtnContainer);B.slider.content.width=I-(B.slider.content.padding*2);VMM.Lib.width(o,(d.length*B.slider.content.width));if(Q){var M=d[H].leftpos();VMM.Lib.css(h,"left",M)}b();C();VMM.Lib.css(n.nextBtn,"left",(I-B.slider.nav.width));VMM.Lib.height(n.prevBtn,B.slider.height);VMM.Lib.height(n.nextBtn,B.slider.height);VMM.Lib.css(n.nextBtnContainer,"top",((B.slider.height/2)-(B.slider.nav.height/2))+10);VMM.Lib.css(n.prevBtnContainer,"top",((B.slider.height/2)-(B.slider.nav.height/2))+10);VMM.Lib.height(x,B.slider.height);VMM.Lib.width(x,I);if(N){G(H,"linear",1)}if(H==0){VMM.Lib.visible(n.prevBtn,false)}}function a(M){if(H==d.length-1){VMM.Lib.animate(h,B.duration,B.ease,{left:-(d[H].leftpos())})}else{G(H+1);v()}}function K(M){if(H==0){G(H)}else{G(H-1);v()}}function m(M){switch(M.keyCode){case 39:a(M);break;case 37:K(M);break}}function E(Q,N){if(A.length==0){for(var P=0;P<d.length;P++){A.push(d[P].leftpos())}}if(typeof N.left=="number"){var M=N.left;var O=-(d[H].leftpos());if(M<O-(B.slider_width/3)){a()}else{if(M>O+(B.slider_width/3)){K()}else{VMM.Lib.animate(h,B.duration,B.ease,{left:O})}}}else{VMM.Lib.animate(h,B.duration,B.ease,{left:O})}if(typeof N.top=="number"){VMM.Lib.animate(h,B.duration,B.ease,{top:-N.top})}else{}}function v(){B.current_slide=H;VMM.fireEvent(z,"UPDATE")}var r=function(M){L=M};var e=function(O){VMM.attachElement(o,"");d=[];for(var M=0;M<O.length;M++){var N=new VMM.Slider.Slide(O[M],o);d.push(N)}};var f=function(N){if(N){p()}else{for(var M=0;M<d.length;M++){d[M].clearTimers()}y=setTimeout(p,B.duration)}};var p=function(){for(var M=0;M<d.length;M++){d[M].enqueue=true}for(var N=0;N<B.preload;N++){if(!((H+N)>d.length-1)){d[H+N].show();d[H+N].enqueue=false}if(!((H-N)<0)){d[H-N].show();d[H-N].enqueue=false}}if(d.length>50){for(var O=0;O<d.length;O++){if(d[O].enqueue){d[O].hide()}}}b()};var q=function(M){};var b=function(){var R=".slider-item .layout-text-media .media .media-container ";var M=".slider-item .layout-media .media .media-container ";var Q=".slider-item .media .media-container";var O={text_media:{width:(B.slider.content.width/100)*60,height:B.slider.height-60,video:{width:0,height:0},text:{width:((B.slider.content.width/100)*40)-30,height:B.slider.height}},media:{width:B.slider.content.width,height:B.slider.height-110,video:{width:0,height:0}}};VMM.master_config.sizes.api.width=O.media.width;VMM.master_config.sizes.api.height=O.media.height;O.text_media.video=VMM.Util.ratio.fit(O.text_media.width,O.text_media.height,16,9);O.media.video=VMM.Util.ratio.fit(O.media.width,O.media.height,16,9);VMM.Lib.css(".slider-item","width",B.slider.content.width);VMM.Lib.height(".slider-item",B.slider.height);var N=false;if(I<=640){N=true}else{if(VMM.Browser.device=="mobile"&&VMM.Browser.orientation=="portrait"){N=true}else{if(VMM.Browser.device=="tablet"&&VMM.Browser.orientation=="portrait"){}}}if(N){O.text_media.width=B.slider.content.width;O.text_media.height=((B.slider.height/100)*50)-50;O.media.height=((B.slider.height/100)*70)-40;O.text_media.video=VMM.Util.ratio.fit(O.text_media.width,O.text_media.height,16,9);O.media.video=VMM.Util.ratio.fit(O.media.width,O.media.height,16,9);VMM.Lib.css(".slider-item .layout-text-media .text","width","100%");VMM.Lib.css(".slider-item .layout-text-media .text","display","block");VMM.Lib.css(".slider-item .layout-text-media .text .container","display","block");VMM.Lib.css(".slider-item .layout-text-media .text .container","width",B.slider.content.width);VMM.Lib.css(".slider-item .layout-text-media .media","float","none");VMM.Lib.addClass(".slider-item .content-container","pad-top");VMM.Lib.css(".slider-item .media blockquote p","line-height","18px");VMM.Lib.css(".slider-item .media blockquote p","font-size","16px");VMM.Lib.css(".slider-item","overflow-y","auto")}else{VMM.Lib.css(".slider-item .layout-text-media .text","width","40%");VMM.Lib.css(".slider-item .layout-text-media .text","display","table-cell");VMM.Lib.css(".slider-item .layout-text-media .text .container","display","table-cell");VMM.Lib.css(".slider-item .layout-text-media .text .container","width","auto");VMM.Lib.css(".slider-item .layout-text-media .text .container .start","width",O.text_media.text.width);VMM.Lib.removeClass(".slider-item .content-container","pad-top");VMM.Lib.css(".slider-item .layout-text-media .media","float","left");VMM.Lib.css(".slider-item .layout-text-media","display","table");VMM.Lib.css(".slider-item .media blockquote p","line-height","36px");VMM.Lib.css(".slider-item .media blockquote p","font-size","28px");VMM.Lib.css(".slider-item","display","table");VMM.Lib.css(".slider-item","overflow-y","auto")}VMM.Lib.css(R+".media-frame","max-width",O.text_media.width);VMM.Lib.height(R+".media-frame",O.text_media.height);VMM.Lib.width(R+".media-frame",O.text_media.width);VMM.Lib.css(R+"img","max-height",O.text_media.height);VMM.Lib.css(M+"img","max-height",O.media.height);VMM.Lib.css(R+"img","max-width",O.text_media.width);VMM.Lib.css(R+".avatar img","max-width",32);VMM.Lib.css(R+".avatar img","max-height",32);VMM.Lib.css(M+".avatar img","max-width",32);VMM.Lib.css(M+".avatar img","max-height",32);VMM.Lib.css(R+".article-thumb","max-width","50%");VMM.Lib.css(M+".article-thumb","max-width",200);VMM.Lib.width(R+".media-frame",O.text_media.video.width);VMM.Lib.height(R+".media-frame",O.text_media.video.height);VMM.Lib.width(M+".media-frame",O.media.video.width);VMM.Lib.height(M+".media-frame",O.media.video.height);VMM.Lib.css(M+".media-frame","max-height",O.media.video.height);VMM.Lib.css(M+".media-frame","max-width",O.media.video.width);VMM.Lib.height(M+".soundcloud",168);VMM.Lib.height(R+".soundcloud",168);VMM.Lib.width(M+".soundcloud",O.media.width);VMM.Lib.width(R+".soundcloud",O.text_media.width);VMM.Lib.css(Q+".soundcloud","max-height",168);VMM.Lib.height(R+".map",O.text_media.height);VMM.Lib.css(M+".map","max-height",O.media.height);VMM.Lib.width(M+".map",O.media.width);VMM.Lib.height(R+".doc",O.text_media.height);VMM.Lib.height(M+".doc",O.media.height);VMM.Lib.width(M+".wikipedia",O.media.width);VMM.Lib.width(M+".twitter",O.media.width);VMM.Lib.width(M+".plain-text-quote",O.media.width);VMM.Lib.width(M+".plain-text",O.media.width);for(var P=0;P<d.length;P++){d[P].layout(N);if(d[P].content_height()>B.slider.height+20){d[P].css("display","block")}else{d[P].css("display","table")}}};var C=function(){var N=0;for(var M=0;M<d.length;M++){N=M*(B.slider.width+B.spacing);d[M].leftpos(N)}};var F=function(O){var N="linear";for(var M=0;M<d.length;M++){if(M==H){d[M].animate(B.duration,N,{opacity:1})}else{if(M==H-1||M==H+1){d[M].animate(B.duration,N,{opacity:0.1})}else{d[M].opacity(O)}}}};var G=function(N,P,Q,S,T){VMM.ExternalAPI.youtube.stopPlayers();H=N;var M=B.ease;var R=B.duration;var U=false;var O=false;var W=d[H].leftpos();var V="";if(H==0){O=true}if(H+1>=d.length){U=true}if(P!=null&&P!=""){M=P}if(Q!=null&&Q!=""){R=Q}if(O){VMM.Lib.visible(n.prevBtn,false)}else{VMM.Lib.visible(n.prevBtn,true);V=VMM.Util.unlinkify(L[H-1].title);if(B.type=="timeline"){if(typeof L[H-1].date==="undefined"){VMM.attachElement(n.prevDate,V);VMM.attachElement(n.prevTitle,"")}else{VMM.attachElement(n.prevDate,VMM.Date.prettyDate(L[H-1].startdate));VMM.attachElement(n.prevTitle,V)}}else{VMM.attachElement(n.prevTitle,V)}}if(U){VMM.Lib.visible(n.nextBtn,false)}else{VMM.Lib.visible(n.nextBtn,true);V=VMM.Util.unlinkify(L[H+1].title);if(B.type=="timeline"){if(typeof L[H+1].date==="undefined"){VMM.attachElement(n.nextDate,V);VMM.attachElement(n.nextTitle,"")}else{VMM.attachElement(n.nextDate,VMM.Date.prettyDate(L[H+1].startdate));VMM.attachElement(n.nextTitle,V)}}else{VMM.attachElement(n.nextTitle,V)}}if(S){VMM.Lib.css(h,"left",-(W-B.slider.content.padding))}else{VMM.Lib.stop(h);VMM.Lib.animate(h,R,M,{left:-(W-B.slider.content.padding)})}if(T){VMM.fireEvent(z,"LOADED")}if(d[H].height()>B.slider_height){VMM.Lib.css(".slider","overflow-y","scroll")}else{VMM.Lib.css(z,"overflow-y","hidden");VMM.Lib.animate(z,R,M,{scrollTop:VMM.Lib.prop(z,"scrollHeight")-VMM.Lib.height(z)})}f()};var t=function(){var M="<div class='icon'>&nbsp;</div>";n.nextBtn=VMM.appendAndGetElement(l,"<div>","nav-next");n.prevBtn=VMM.appendAndGetElement(l,"<div>","nav-previous");n.nextBtnContainer=VMM.appendAndGetElement(n.nextBtn,"<div>","nav-container",M);n.prevBtnContainer=VMM.appendAndGetElement(n.prevBtn,"<div>","nav-container",M);if(B.type=="timeline"){n.nextDate=VMM.appendAndGetElement(n.nextBtnContainer,"<div>","date","");n.prevDate=VMM.appendAndGetElement(n.prevBtnContainer,"<div>","date","")}n.nextTitle=VMM.appendAndGetElement(n.nextBtnContainer,"<div>","title","Title Goes Here");n.prevTitle=VMM.appendAndGetElement(n.prevBtnContainer,"<div>","title","Title Goes Here");VMM.bindEvent(".nav-next",a);VMM.bindEvent(".nav-previous",K);VMM.bindEvent(window,m,"keydown")};var D=function(){VMM.attachElement(z,"");l=VMM.getElement("div.slider");x=VMM.appendAndGetElement(l,"<div>","slider-container-mask");h=VMM.appendAndGetElement(x,"<div>","slider-container");o=VMM.appendAndGetElement(h,"<div>","slider-item-container");t();e(L);var M=3000;if(VMM.Browser.device=="tablet"||VMM.Browser.device=="mobile"){B.duration=500;M=1000}else{if(VMM.Browser.device=="mobile"){}else{}}i(false,true);VMM.Lib.visible(n.prevBtn,false);G(B.current_slide,"easeOutExpo",M,true,true);c=true}}}if(typeof VMM.Slider!="undefined"){VMM.Slider.Slide=function(v,t){var x,r,p,q,f,w,z=v,a={},f="",k="",s=false,b=false,l=false,g=true,j=false,h="slide_",o={pushque:"",render:"",relayout:"",remove:"",skinny:false},n={pushque:500,render:100,relayout:100,remove:30000};h=h+z.uniqueid;this.enqueue=g;this.id=h;f=VMM.appendAndGetElement(t,"<div>","slider-item");w={slide:"",text:"",media:"",media_element:"",layout:"content-container layout",has:{headline:false,text:false,media:false}};this.show=function(c){g=false;o.skinny=c;j=false;clearTimeout(o.remove);if(!s){if(b){clearTimeout(o.relayout);o.relayout=setTimeout(u,n.relayout)}else{y(c)}}};this.hide=function(){if(s&&!j){j=true;clearTimeout(o.remove);o.remove=setTimeout(e,n.remove)}};this.clearTimers=function(){clearTimeout(o.relayout);clearTimeout(o.pushque);clearTimeout(o.render)};this.layout=function(c){if(s&&b){i(c)}};this.elem=function(){return f};this.position=function(){return VMM.Lib.position(f)};this.leftpos=function(c){if(typeof c!="undefined"){VMM.Lib.css(f,"left",c)}else{return VMM.Lib.position(f).left}};this.animate=function(B,A,c){VMM.Lib.animate(f,B,A,c)};this.css=function(d,c){VMM.Lib.css(f,d,c)};this.opacity=function(c){VMM.Lib.css(f,"opacity",c)};this.width=function(){return VMM.Lib.width(f)};this.height=function(){return VMM.Lib.height(f)};this.content_height=function(){var c=VMM.Lib.find(f,".content")[0];if(c!="undefined"&&c!=null){return VMM.Lib.height(c)}else{return 0}};var y=function(c){trace("RENDER "+h);s=true;b=true;o.skinny=c;m();clearTimeout(o.pushque);clearTimeout(o.render);o.pushque=setTimeout(VMM.ExternalAPI.pushQues,n.pushque)};var e=function(){trace("REMOVE SLIDE TIMER FINISHED");s=false;VMM.Lib.detach(r);VMM.Lib.detach(x)};var u=function(){s=true;i(o.skinny,true)};var i=function(c,d){if(w.has.text){if(c){if(!l||d){VMM.Lib.removeClass(p,"pad-left");VMM.Lib.detach(r);VMM.Lib.detach(x);VMM.Lib.append(p,r);VMM.Lib.append(p,x);l=true}}else{if(l||d){VMM.Lib.addClass(p,"pad-left");VMM.Lib.detach(r);VMM.Lib.detach(x);VMM.Lib.append(p,x);VMM.Lib.append(p,r);l=false}}}else{if(d){if(w.has.headline){VMM.Lib.detach(r);VMM.Lib.append(p,r)}VMM.Lib.detach(x);VMM.Lib.append(p,x)}}};var m=function(){trace("BUILDSLIDE");q=VMM.appendAndGetElement(f,"<div>","content");p=VMM.appendAndGetElement(q,"<div>");if(z.startdate!=null&&z.startdate!=""){if(type.of(z.startdate)=="date"){if(z.type!="start"){var d=VMM.Date.prettyDate(z.startdate);var c=VMM.Date.prettyDate(z.enddate);if(d!=c){w.text+=VMM.createElement("h2",d+" &mdash; "+c+"","date")}else{w.text+=VMM.createElement("h2",d,"date")}}}}if(z.headline!=null&&z.headline!=""){w.has.headline=true;if(z.type=="start"){w.text+=VMM.createElement("h2",VMM.Util.linkify_with_twitter(z.headline,"_blank"),"start")}else{w.text+=VMM.createElement("h3",VMM.Util.linkify_with_twitter(z.headline,"_blank"))}}if(z.text!=null&&z.text!=""){w.has.text=true;w.text+=VMM.createElement("p",VMM.Util.linkify_with_twitter(z.text,"_blank"))}if(w.has.text||w.has.headline){w.text=VMM.createElement("div",w.text,"container");r=VMM.appendAndGetElement(p,"<div>","text",VMM.TextElement.create(w.text))}if(z.needs_slug){}if(z.asset!=null&&z.asset!=""){if(z.asset.media!=null&&z.asset.media!=""){w.has.media=true;x=VMM.appendAndGetElement(p,"<div>","media",VMM.MediaElement.create(z.asset,z.uniqueid))}}if(w.has.text){w.layout+="-text"}if(w.has.media){w.layout+="-media"}if(w.has.text){if(o.skinny){VMM.Lib.addClass(p,w.layout);l=true}else{VMM.Lib.addClass(p,w.layout);VMM.Lib.addClass(p,"pad-left");VMM.Lib.detach(r);VMM.Lib.append(p,r)}}else{VMM.Lib.addClass(p,w.layout)}}}}if(typeof VMM!="undefined"&&typeof VMM.Language=="undefined"){VMM.Language={lang:"en",api:{wikipedia:"en"},date:{month:["January","February","March","April","May","June","July","August","September","October","November","December"],month_abbr:["Jan.","Feb.","March","April","May","June","July","Aug.","Sept.","Oct.","Nov.","Dec."],day:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],day_abbr:["Sun.","Mon.","Tues.","Wed.","Thurs.","Fri.","Sat."]},dateformats:{year:"yyyy",month_short:"mmm",month:"mmmm yyyy",full_short:"mmm d",full:"mmmm d',' yyyy",time_no_seconds_short:"h:MM TT",time_no_seconds_small_date:"h:MM TT'<br/><small>'mmmm d',' yyyy'</small>'",full_long:"mmm d',' yyyy 'at' hh:MM TT",full_long_small_date:"hh:MM TT'<br/><small>mmm d',' yyyy'</small>'"},messages:{loading_timeline:"Loading Timeline... ",return_to_title:"Return to Title",expand_timeline:"Expand Timeline",contract_timeline:"Contract Timeline",wikipedia:"From Wikipedia, the free encyclopedia",loading_content:"Loading Content",loading:"Loading"}}}var Aes={};Aes.cipher=function(e,a){var d=4;var h=a.length/d-1;var g=[[],[],[],[]];for(var f=0;f<4*d;f++){g[f%4][Math.floor(f/4)]=e[f]}g=Aes.addRoundKey(g,a,0,d);for(var c=1;c<h;c++){g=Aes.subBytes(g,d);g=Aes.shiftRows(g,d);g=Aes.mixColumns(g,d);g=Aes.addRoundKey(g,a,c,d)}g=Aes.subBytes(g,d);g=Aes.shiftRows(g,d);g=Aes.addRoundKey(g,a,h,d);var b=new Array(4*d);for(var f=0;f<4*d;f++){b[f]=g[f%4][Math.floor(f/4)]}return b};Aes.keyExpansion=function(f){var d=4;var b=f.length/4;var g=b+6;var e=new Array(d*(g+1));var h=new Array(4);for(var c=0;c<b;c++){var a=[f[4*c],f[4*c+1],f[4*c+2],f[4*c+3]];e[c]=a}for(var c=b;c<(d*(g+1));c++){e[c]=new Array(4);for(var j=0;j<4;j++){h[j]=e[c-1][j]}if(c%b==0){h=Aes.subWord(Aes.rotWord(h));for(var j=0;j<4;j++){h[j]^=Aes.rCon[c/b][j]}}else{if(b>6&&c%b==4){h=Aes.subWord(h)}}for(var j=0;j<4;j++){e[c][j]=e[c-b][j]^h[j]}}return e};Aes.subBytes=function(b,a){for(var d=0;d<4;d++){for(var e=0;e<a;e++){b[d][e]=Aes.sBox[b[d][e]]}}return b};Aes.shiftRows=function(d,a){var b=new Array(4);for(var e=1;e<4;e++){for(var f=0;f<4;f++){b[f]=d[e][(f+e)%a]}for(var f=0;f<4;f++){d[e][f]=b[f]}}return d};Aes.mixColumns=function(h,f){for(var j=0;j<4;j++){var e=new Array(4);var d=new Array(4);for(var g=0;g<4;g++){e[g]=h[g][j];d[g]=h[g][j]&128?h[g][j]<<1^283:h[g][j]<<1}h[0][j]=d[0]^e[1]^d[1]^e[2]^e[3];h[1][j]=e[0]^d[1]^e[2]^d[2]^e[3];h[2][j]=e[0]^e[1]^d[2]^e[3]^d[3];h[3][j]=e[0]^d[0]^e[1]^e[2]^d[3]}return h};Aes.addRoundKey=function(f,a,d,b){for(var e=0;e<4;e++){for(var g=0;g<b;g++){f[e][g]^=a[d*4+g][e]}}return f};Aes.subWord=function(a){for(var b=0;b<4;b++){a[b]=Aes.sBox[a[b]]}return a};Aes.rotWord=function(a){var c=a[0];for(var b=0;b<3;b++){a[b]=a[b+1]}a[3]=c;return a};Aes.sBox=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22];Aes.rCon=[[0,0,0,0],[1,0,0,0],[2,0,0,0],[4,0,0,0],[8,0,0,0],[16,0,0,0],[32,0,0,0],[64,0,0,0],[128,0,0,0],[27,0,0,0],[54,0,0,0]];Aes.Ctr={};Aes.Ctr.encrypt=function(j,a,u){var k=16;if(!(u==128||u==192||u==256)){return""}j=Utf8.encode(j);a=Utf8.encode(a);var l=u/8;var f=new Array(l);for(var s=0;s<l;s++){f[s]=isNaN(a.charCodeAt(s))?0:a.charCodeAt(s)}var z=Aes.cipher(f,Aes.keyExpansion(f));z=z.concat(z.slice(0,l-16));var e=new Array(k);var t=(new Date()).getTime();var g=t%1000;var d=Math.floor(t/1000);var p=Math.floor(Math.random()*65535);for(var s=0;s<2;s++){e[s]=(g>>>s*8)&255}for(var s=0;s<2;s++){e[s+2]=(p>>>s*8)&255}for(var s=0;s<4;s++){e[s+4]=(d>>>s*8)&255}var n="";for(var s=0;s<8;s++){n+=String.fromCharCode(e[s])}var w=Aes.keyExpansion(z);var r=Math.ceil(j.length/k);var m=new Array(r);for(var x=0;x<r;x++){for(var v=0;v<4;v++){e[15-v]=(x>>>v*8)&255}for(var v=0;v<4;v++){e[15-v-4]=(x/4294967296>>>v*8)}var h=Aes.cipher(e,w);var q=x<r-1?k:(j.length-1)%k+1;var o=new Array(q);for(var s=0;s<q;s++){o[s]=h[s]^j.charCodeAt(x*k+s);o[s]=String.fromCharCode(o[s])}m[x]=o.join("")}var y=n+m.join("");y=Base64.encode(y);return y};Aes.Ctr.decrypt=function(t,e,p){var m=16;if(!(p==128||p==192||p==256)){return""}t=Base64.decode(t);e=Utf8.encode(e);var n=p/8;var j=new Array(n);for(var o=0;o<n;o++){j[o]=isNaN(e.charCodeAt(o))?0:e.charCodeAt(o)}var u=Aes.cipher(j,Aes.keyExpansion(j));u=u.concat(u.slice(0,n-16));var f=new Array(8);ctrTxt=t.slice(0,8);for(var o=0;o<8;o++){f[o]=ctrTxt.charCodeAt(o)}var r=Aes.keyExpansion(u);var g=Math.ceil((t.length-8)/m);var h=new Array(g);for(var s=0;s<g;s++){h[s]=t.slice(8+s*m,8+s*m+m)}t=h;var a=new Array(t.length);for(var s=0;s<g;s++){for(var q=0;q<4;q++){f[15-q]=((s)>>>q*8)&255}for(var q=0;q<4;q++){f[15-q-4]=(((s+1)/4294967296-1)>>>q*8)&255}var l=Aes.cipher(f,r);var d=new Array(t[s].length);for(var o=0;o<t[s].length;o++){d[o]=l[o]^t[s].charCodeAt(o);d[o]=String.fromCharCode(d[o])}a[s]=d.join("")}var k=a.join("");k=Utf8.decode(k);return k};var Base64={};Base64.code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";Base64.encode=function(n,p){p=(typeof p=="undefined")?false:p;var g,b,a,r,o,k,j,h,i=[],f="",m,q,l;var d=Base64.code;q=p?n.encodeUTF8():n;m=q.length%3;if(m>0){while(m++<3){f+="=";q+="\0"}}for(m=0;m<q.length;m+=3){g=q.charCodeAt(m);b=q.charCodeAt(m+1);a=q.charCodeAt(m+2);r=g<<16|b<<8|a;o=r>>18&63;k=r>>12&63;j=r>>6&63;h=r&63;i[m/3]=d.charAt(o)+d.charAt(k)+d.charAt(j)+d.charAt(h)}l=i.join("");l=l.slice(0,l.length-f.length)+f;return l};Base64.decode=function(n,e){e=(typeof e=="undefined")?false:e;var g,b,a,o,k,i,h,q,j=[],p,m;var f=Base64.code;m=e?n.decodeUTF8():n;for(var l=0;l<m.length;l+=4){o=f.indexOf(m.charAt(l));k=f.indexOf(m.charAt(l+1));i=f.indexOf(m.charAt(l+2));h=f.indexOf(m.charAt(l+3));q=o<<18|k<<12|i<<6|h;g=q>>>16&255;b=q>>>8&255;a=q&255;j[l/4]=String.fromCharCode(g,b,a);if(h==64){j[l/4]=String.fromCharCode(g,b)}if(i==64){j[l/4]=String.fromCharCode(g)}}p=j.join("");return e?p.decodeUTF8():p};var Utf8={};Utf8.encode=function(a){var b=a.replace(/[\u0080-\u07ff]/g,function(e){var d=e.charCodeAt(0);return String.fromCharCode(192|d>>6,128|d&63)});b=b.replace(/[\u0800-\uffff]/g,function(e){var d=e.charCodeAt(0);return String.fromCharCode(224|d>>12,128|d>>6&63,128|d&63)});return b};Utf8.decode=function(b){var a=b.replace(/[\u00e0-\u00ef][\u0080-\u00bf][\u0080-\u00bf]/g,function(e){var d=((e.charCodeAt(0)&15)<<12)|((e.charCodeAt(1)&63)<<6)|(e.charCodeAt(2)&63);return String.fromCharCode(d)});a=a.replace(/[\u00c0-\u00df][\u0080-\u00bf]/g,function(e){var d=(e.charCodeAt(0)&31)<<6|e.charCodeAt(1)&63;return String.fromCharCode(d)});return a};!function(b){var a=function(d,c){this.init("tooltip",d,c)};a.prototype={constructor:a,init:function(f,e,d){var g,c;this.type=f;this.$element=b(e);this.options=this.getOptions(d);this.enabled=true;if(this.options.trigger!="manual"){g=this.options.trigger=="hover"?"mouseenter":"focus";c=this.options.trigger=="hover"?"mouseleave":"blur";this.$element.on(g,this.options.selector,b.proxy(this.enter,this));this.$element.on(c,this.options.selector,b.proxy(this.leave,this))}this.options.selector?(this._options=b.extend({},this.options,{trigger:"manual",selector:""})):this.fixTitle()},getOptions:function(c){c=b.extend({},b.fn[this.type].defaults,c,this.$element.data());if(c.delay&&typeof c.delay=="number"){c.delay={show:c.delay,hide:c.delay}}return c},enter:function(d){var c=b(d.currentTarget)[this.type](this._options).data(this.type);if(!c.options.delay||!c.options.delay.show){c.show()}else{c.hoverState="in";setTimeout(function(){if(c.hoverState=="in"){c.show()}},c.options.delay.show)}},leave:function(d){var c=b(d.currentTarget)[this.type](this._options).data(this.type);if(!c.options.delay||!c.options.delay.hide){c.hide()}else{c.hoverState="out";setTimeout(function(){if(c.hoverState=="out"){c.hide()}},c.options.delay.hide)}},show:function(){var g,c,i,e,h,d,f;if(this.hasContent()&&this.enabled){g=this.tip();this.setContent();if(this.options.animation){g.addClass("fade")}d=typeof this.options.placement=="function"?this.options.placement.call(this,g[0],this.$element[0]):this.options.placement;c=/in/.test(d);g.remove().css({top:0,left:0,display:"block"}).appendTo(c?this.$element:document.body);i=this.getPosition(c);e=g[0].offsetWidth;h=g[0].offsetHeight;switch(c?d.split(" ")[1]:d){case"bottom":f={top:i.top+i.height,left:i.left+i.width/2-e/2};break;case"top":f={top:i.top-h,left:i.left+i.width/2-e/2};break;case"left":f={top:i.top+i.height/2-h/2,left:i.left-e};break;case"right":f={top:i.top+i.height/2-h/2,left:i.left+i.width};break}g.css(f).addClass(d).addClass("in")}},setContent:function(){var c=this.tip();c.find(".tooltip-inner").html(this.getTitle());c.removeClass("fade in top bottom left right")},hide:function(){var c=this,d=this.tip();d.removeClass("in");function e(){var f=setTimeout(function(){d.off(b.support.transition.end).remove()},500);d.one(b.support.transition.end,function(){clearTimeout(f);d.remove()})}b.support.transition&&this.$tip.hasClass("fade")?e():d.remove()},fixTitle:function(){var c=this.$element;if(c.attr("title")||typeof(c.attr("data-original-title"))!="string"){c.attr("data-original-title",c.attr("title")||"").removeAttr("title")}},hasContent:function(){return this.getTitle()},getPosition:function(c){return b.extend({},(c?{top:0,left:0}:this.$element.offset()),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight})},getTitle:function(){var e,c=this.$element,d=this.options;e=c.attr("data-original-title")||(typeof d.title=="function"?d.title.call(c[0]):d.title);e=e.toString().replace(/(^\s*|\s*$)/,"");return e},tip:function(){return this.$tip=this.$tip||b(this.options.template)},validate:function(){if(!this.$element[0].parentNode){this.hide();this.$element=null;this.options=null}},enable:function(){this.enabled=true},disable:function(){this.enabled=false},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(){this[this.tip().hasClass("in")?"hide":"show"]()}};b.fn.tooltip=function(c){return this.each(function(){var f=b(this),e=f.data("tooltip"),d=typeof c=="object"&&c;if(!e){f.data("tooltip",(e=new a(this,d)))}if(typeof c=="string"){e[c]()}})};b.fn.tooltip.Constructor=a;b.fn.tooltip.defaults={animation:true,delay:0,selector:false,placement:"top",trigger:"hover",title:"",template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>'}}(window.jQuery);!function(b){var a=function(d,c){this.init("tooltip",d,c)};a.prototype={constructor:a,init:function(f,e,d){var g,c;this.type=f;this.$element=b(e);this.options=this.getOptions(d);this.enabled=true;if(this.options.trigger!="manual"){g=this.options.trigger=="hover"?"mouseenter":"focus";c=this.options.trigger=="hover"?"mouseleave":"blur";this.$element.on(g,this.options.selector,b.proxy(this.enter,this));this.$element.on(c,this.options.selector,b.proxy(this.leave,this))}this.options.selector?(this._options=b.extend({},this.options,{trigger:"manual",selector:""})):this.fixTitle()},getOptions:function(c){c=b.extend({},b.fn[this.type].defaults,c,this.$element.data());if(c.delay&&typeof c.delay=="number"){c.delay={show:c.delay,hide:c.delay}}return c},enter:function(d){var c=b(d.currentTarget)[this.type](this._options).data(this.type);if(!c.options.delay||!c.options.delay.show){c.show()}else{c.hoverState="in";setTimeout(function(){if(c.hoverState=="in"){c.show()}},c.options.delay.show)}},leave:function(d){var c=b(d.currentTarget)[this.type](this._options).data(this.type);if(!c.options.delay||!c.options.delay.hide){c.hide()}else{c.hoverState="out";setTimeout(function(){if(c.hoverState=="out"){c.hide()}},c.options.delay.hide)}},show:function(){var g,c,i,e,h,d,f;if(this.hasContent()&&this.enabled){g=this.tip();this.setContent();if(this.options.animation){g.addClass("fade")}d=typeof this.options.placement=="function"?this.options.placement.call(this,g[0],this.$element[0]):this.options.placement;c=/in/.test(d);g.remove().css({top:0,left:0,display:"block"}).appendTo(c?this.$element:document.body);i=this.getPosition(c);e=g[0].offsetWidth;h=g[0].offsetHeight;switch(c?d.split(" ")[1]:d){case"bottom":f={top:i.top+i.height,left:i.left+i.width/2-e/2};break;case"top":f={top:i.top-h,left:i.left+i.width/2-e/2};break;case"left":f={top:i.top+i.height/2-h/2,left:i.left-e};break;case"right":f={top:i.top+i.height/2-h/2,left:i.left+i.width};break}g.css(f).addClass(d).addClass("in")}},setContent:function(){var c=this.tip();c.find(".tooltip-inner").html(this.getTitle());c.removeClass("fade in top bottom left right")},hide:function(){var c=this,d=this.tip();d.removeClass("in");function e(){var f=setTimeout(function(){d.off(b.support.transition.end).remove()},500);d.one(b.support.transition.end,function(){clearTimeout(f);d.remove()})}b.support.transition&&this.$tip.hasClass("fade")?e():d.remove()},fixTitle:function(){var c=this.$element;if(c.attr("title")||typeof(c.attr("data-original-title"))!="string"){c.attr("data-original-title",c.attr("title")||"").removeAttr("title")}},hasContent:function(){return this.getTitle()},getPosition:function(c){return b.extend({},(c?{top:0,left:0}:this.$element.offset()),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight})},getTitle:function(){var e,c=this.$element,d=this.options;e=c.attr("data-original-title")||(typeof d.title=="function"?d.title.call(c[0]):d.title);e=e.toString().replace(/(^\s*|\s*$)/,"");return e},tip:function(){return this.$tip=this.$tip||b(this.options.template)},validate:function(){if(!this.$element[0].parentNode){this.hide();this.$element=null;this.options=null}},enable:function(){this.enabled=true},disable:function(){this.enabled=false},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(){this[this.tip().hasClass("in")?"hide":"show"]()}};b.fn.tooltip=function(c){return this.each(function(){var f=b(this),e=f.data("tooltip"),d=typeof c=="object"&&c;if(!e){f.data("tooltip",(e=new a(this,d)))}if(typeof c=="string"){e[c]()}})};b.fn.tooltip.Constructor=a;b.fn.tooltip.defaults={animation:true,delay:0,selector:false,placement:"top",trigger:"hover",title:"",template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>'}}(window.jQuery);
/*!
	Timeline
	Designed and built by Zach Wise at VéritéCo

    This program is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    http://www.gnu.org/licenses/

*/
if(typeof VMM!="undefined"&&typeof VMM.Timeline=="undefined"){VMM.Timeline=function(D,L,G,t){var x,K,y,d,s,M,l;var v={},N={},I=[],C={};var j=false,e=false,m=false,c=false;if(type.of(t)=="string"){l=t}else{l="#timeline"}M="1.58";trace("TIMELINE VERSION "+M);C={embed:false,events:{data_ready:"DATAREADY",messege:"MESSEGE",headline:"TIMELINE_HEADLINE",slide_change:"SLIDE_CHANGE",resize:"resize"},id:l,type:"timeline",maptype:"toner",preload:4,current_slide:0,hash_bookmark:false,start_at_end:false,start_page:false,api_keys:{google:"",flickr:"",twitter:""},interval:10,something:0,width:960,height:540,spacing:15,loaded:{slider:false,timenav:false,percentloaded:0},nav:{start_page:false,interval_width:200,density:4,minor_width:0,minor_left:0,multiplier:{current:6,min:0.1,max:50},rows:[1,1,1],width:960,height:200,marker:{width:150,height:48}},feature:{width:960,height:540},slider:{width:720,height:400,content:{width:720,height:400,padding:130},nav:{width:100,height:200}},ease:"easeInOutExpo",duration:1000,language:VMM.Language};if(D!=null&&D!=""){C.width=D;j=true}if(L!=null&&L!=""){C.height=L;e=true}if(window.location.hash){var H=window.location.hash.substring(1);if(!isNaN(H)){C.current_slide=parseInt(H)}}window.onhashchange=function(){if(C.hash_bookmark){if(c){var h=window.location.hash.substring(1);F(parseInt(h))}else{c=false}}};var O=function(w){if(typeof timeline_config=="object"){trace("HAS TIMELINE CONFIG");var h;for(h in timeline_config){if(Object.prototype.hasOwnProperty.call(timeline_config,h)){C[h]=timeline_config[h]}}}else{if(typeof w=="object"){var h;for(h in w){if(Object.prototype.hasOwnProperty.call(w,h)){C[h]=w[h]}}}}C.nav.width=C.width;C.nav.height=200;C.feature.width=C.width;C.feature.height=C.height-C.nav.height;VMM.Timeline.Config=C;VMM.master_config.Timeline=VMM.Timeline.Config;this.events=C.events};var g=function(P,Q){x=VMM.getElement(l);VMM.Lib.addClass(l,"vmm-timeline");K=VMM.appendAndGetElement(x,"<div>","feedback","");y=VMM.appendAndGetElement(K,"<div>","messege","Timeline");d=new VMM.Slider(l+" div.slider",C);s=new VMM.Timeline.TimeNav(l+" div.navigation");if(!j){C.width=VMM.Lib.width(x)}else{VMM.Lib.width(x,C.width)}if(!e){C.height=VMM.Lib.height(x)}else{VMM.Lib.height(x,C.height)}};function b(h,w){trace("onDataReady");trace(w);N=w.timeline;if(type.of(N.era)=="array"){}else{N.era=[]}J()}function A(){E()}function i(){n();d.setSize(C.feature.width,C.feature.height);s.setSize(C.width,C.height)}function z(h){C.loaded.slider=true;f()}function f(h){C.loaded.percentloaded=C.loaded.percentloaded+25;if(C.loaded.slider&&C.loaded.timenav){q()}}function o(h){C.loaded.timenav=true;f()}function B(h){c=true;C.current_slide=d.getCurrentNumber();p(C.current_slide);s.setMarker(C.current_slide,C.ease,C.duration)}function u(h){c=true;C.current_slide=s.getCurrentNumber();p(C.current_slide);d.setSlide(C.current_slide)}var F=function(h){if(h<=I.length-1&&h>=0){C.current_slide=h;d.setSlide(C.current_slide);s.setMarker(C.current_slide,C.ease,C.duration)}};function p(h){if(C.hash_bookmark){window.location.hash="#"+h.toString()}}this.init=function(P,w,h){if(type.of(w)=="string"){if(w.match("#")){l=w}else{l="#"+w}}O(h);g(D,L);trace("TIMELINE INIT");VMM.Date.setLanguage(VMM.Timeline.Config.language);VMM.master_config.language=VMM.Timeline.Config.language;K=VMM.appendAndGetElement(x,"<div>","feedback","");y=VMM.appendAndGetElement(K,"<div>","messege",VMM.master_config.language.messages.loading_timeline);VMM.bindEvent(global,b,C.events.data_ready);VMM.bindEvent(global,a,C.events.messege);if(VMM.Browser.browser=="Explorer"||VMM.Browser.browser=="MSIE"){if(parseInt(VMM.Browser.version,10)<=7){m=true}}if(m){m=true;VMM.fireEvent(global,C.events.messege,"Internet Explorer "+VMM.Browser.version+" is not supported by TimelineJS. Please update your browser to version 8 or higher.")}else{if(type.of(P)=="string"||type.of(P)=="object"){VMM.Timeline.DataObj.getData(P)}else{VMM.Timeline.DataObj.getData(VMM.getElement(l))}}};this.iframeLoaded=function(){trace("iframeLoaded")};this.reload=function(h){trace("loadNewDates"+h);y=VMM.appendAndGetElement(K,"<div>","messege",VMM.master_config.language.messages.loading_timeline);N={};VMM.Timeline.DataObj.getData(h)};var r=function(h){VMM.getJSON(h,function(w){N=VMM.Timeline.DataObj.getData(w);VMM.fireEvent(global,C.events.data_ready)})};var a=function(h,w){trace("showMessege "+w);VMM.attachElement(y,w)};var q=function(){VMM.Lib.animate(K,C.duration,C.ease*4,{opacity:0},k)};var k=function(){VMM.Lib.detach(K)};var E=function(){if(C.start_at_end&&C.current_slide==0){C.current_slide=I.length-1}VMM.attachElement(x,"");VMM.appendElement(x,"<div class='container main'><div class='feature'><div class='slider'></div></div><div class='navigation'></div></div>");i();VMM.bindEvent("div.slider",z,"LOADED");VMM.bindEvent("div.navigation",o,"LOADED");VMM.bindEvent("div.slider",B,"UPDATE");VMM.bindEvent("div.navigation",u,"UPDATE");d.init(I);s.init(I,N.era);VMM.bindEvent(global,i,C.events.resize)};var n=function(){trace("UPDATE SIZE");C.width=VMM.Lib.width(x);C.height=VMM.Lib.height(x);C.nav.width=C.width;C.feature.width=C.width;if(VMM.Browser.device=="mobile"){}else{}C.feature.height=C.height-C.nav.height-3};var J=function(){I=[];VMM.fireEvent(global,C.events.messege,"Building Dates");n();for(var w=0;w<N.date.length;w++){if(N.date[w].startDate!=null&&N.date[w].startDate!=""){var h={};if(N.date[w].type=="tweets"){h.startdate=VMM.ExternalAPI.twitter.parseTwitterDate(N.date[w].startDate)}else{h.startdate=VMM.Date.parse(N.date[w].startDate)}if(!isNaN(h.startdate)){if(N.date[w].endDate!=null&&N.date[w].endDate!=""){if(N.date[w].type=="tweets"){h.enddate=VMM.ExternalAPI.twitter.parseTwitterDate(N.date[w].endDate)}else{h.enddate=VMM.Date.parse(N.date[w].endDate)}}else{h.enddate=h.startdate}h.needs_slug=false;if(N.date[w].headline==""){if(N.date[w].slug!=null&&N.date[w].slug!=""){h.needs_slug=true}}h.title=N.date[w].headline;h.headline=N.date[w].headline;h.type=N.date[w].type;h.date=VMM.Date.prettyDate(h.startdate);h.asset=N.date[w].asset;h.fulldate=h.startdate.getTime();h.text=N.date[w].text;h.content="";h.tag=N.date[w].tag;h.slug=N.date[w].slug;h.uniqueid=VMM.Util.unique_ID(7);h.id=N.date[w].id;I.push(h)}}}if(N.type!="storify"){I.sort(function(S,R){return S.fulldate-R.fulldate})}if(N.headline!=null&&N.headline!=""&&N.text!=null&&N.text!=""){trace("HAS STARTPAGE");var h={},P=0,Q;Q=I[0].startdate;h.startdate=new Date(I[0].startdate);if(Q.getMonth()===0&&Q.getDate()==1&&Q.getHours()===0&&Q.getMinutes()===0){h.startdate.setFullYear(Q.getFullYear()-1)}else{if(Q.getDate()<=1&&Q.getHours()===0&&Q.getMinutes()===0){h.startdate.setMonth(Q.getMonth()-1)}else{if(Q.getHours()===0&&Q.getMinutes()===0){h.startdate.setDate(Q.getDate()-1)}else{if(Q.getMinutes()===0){h.startdate.setHours(Q.getHours()-1)}else{h.startdate.setMinutes(Q.getMinutes()-1)}}}}h.uniqueid=VMM.Util.unique_ID(7);h.enddate=h.startdate;h.title=N.headline;h.headline=N.headline;h.text=N.text;h.type="start";h.date=VMM.Date.prettyDate(N.startDate);h.asset=N.asset;h.slug=false;h.needs_slug=false;h.fulldate=h.startdate.getTime();if(C.embed){VMM.fireEvent(global,C.events.headline,h.headline)}I.unshift(h)}if(N.type!="storify"){I.sort(function(S,R){return S.fulldate-R.fulldate})}A()}};VMM.Timeline.Config={}}if(typeof VMM.Timeline!="undefined"&&typeof VMM.Timeline.TimeNav=="undefined"){VMM.Timeline.TimeNav=function(q,x,i){trace("VMM.Timeline.TimeNav");var K={},D={},P=q;var ad={interval_position:""};var af=[],I=[],ag=[],r=[],O=[],C,p,N=[];var G={left:"",visible:{left:"",right:""}};var M=0;var e=false;var V={day:24,month:12,year:10,hour:60,minute:60,second:1000,decade:10,century:100,millenium:1000,age:1000000,epoch:10000000,era:100000000,eon:500000000,week:4.34812141,days_in_month:30.4368499,days_in_week:7,weeks_in_month:4.34812141,weeks_in_year:52.177457,days_in_year:365.242199,hours_in_day:24};var z={day:86400000,week:7,month:30.4166666667,year:12,hour:24,minute:1440,second:86400,decade:10,century:100,millenium:1000,age:1000000,epoch:10000000,era:100000000,eon:500000000};var d={type:"year",number:10,first:1970,last:2011,multiplier:100,classname:"_idd",interval_type:"interval"};var F={type:"year",number:10,first:1970,last:2011,multiplier:100,classname:"major",interval_type:"interval major"};var v={type:"year",number:10,first:1970,last:2011,multiplier:100,classname:"_dd_minor",interval_type:"interval minor"};var E={day:{},month:{},year:{},hour:{},minute:{},second:{},decade:{},century:{},millenium:{},week:{},age:{},epoch:{},era:{},eon:{}};var w,c,ai,Z,y,a,X,Q,H,h,U,g,k,L;var R=VMM.Timeline.Config;R.nav.rows=[1,R.nav.marker.height,R.nav.marker.height*2];if(x!=null&&x!=""){R.nav.width=x}if(i!=null&&i!=""){R.nav.height=i}this.init=function(am,al){trace("VMM.Timeline.TimeNav init");if(typeof am!="undefined"){this.setData(am,al)}else{trace("WAITING ON DATA")}};this.setData=function(am,al){if(typeof am!="undefined"){af={};af=am;C=al;T()}else{trace("NO DATA")}};this.setSize=function(al,am){if(al!=null){R.width=al}if(am!=null){R.height=am}if(e){o()}};this.setMarker=function(ao,an,am,al){ah(ao,an,am)};this.getCurrentNumber=function(){return M};function m(){trace("onConfigSet")}function o(al){VMM.Lib.css(H,"left",Math.round(R.width/2)+2);VMM.Lib.css(h,"left",Math.round(R.width/2)-8);ah(R.current_slide,R.ease,R.duration,true,al)}function J(){VMM.fireEvent(P,"UPDATE")}function ak(){VMM.DragSlider.cancelSlide();if(R.nav.multiplier.current>R.nav.multiplier.min){if(R.nav.multiplier.current<=1){R.nav.multiplier.current=R.nav.multiplier.current-0.25}else{if(R.nav.multiplier.current>5){if(R.nav.multiplier.current>16){R.nav.multiplier.current=Math.round(R.nav.multiplier.current-10)}else{R.nav.multiplier.current=Math.round(R.nav.multiplier.current-4)}}else{R.nav.multiplier.current=Math.round(R.nav.multiplier.current-1)}}if(R.nav.multiplier.current<=0){R.nav.multiplier.current=R.nav.multiplier.min}t()}}function n(){VMM.DragSlider.cancelSlide();if(R.nav.multiplier.current<R.nav.multiplier.max){if(R.nav.multiplier.current>4){if(R.nav.multiplier.current>16){R.nav.multiplier.current=Math.round(R.nav.multiplier.current+10)}else{R.nav.multiplier.current=Math.round(R.nav.multiplier.current+4)}}else{R.nav.multiplier.current=Math.round(R.nav.multiplier.current+1)}if(R.nav.multiplier.current>=R.nav.multiplier.max){R.nav.multiplier.current=R.nav.multiplier.max}t()}}function l(al){VMM.DragSlider.cancelSlide();ah(0);J()}var t=function(){trace("config.nav.multiplier "+R.nav.multiplier.current);ab(true);Y(y,r,true,true);Y(a,O,true)};function u(al){VMM.DragSlider.cancelSlide();ah(al.data.number);J()}function ac(al){VMM.Lib.toggleClass(al.data.elem,"zFront")}var ah=function(am,ao,ap,at,au){var al=R.ease,ar=R.duration,av=false,an=false;M=am;G.left=(R.width/2)-VMM.Lib.position(ag[M].marker).left;G.visible.left=Math.abs(G.left)-100;G.visible.right=Math.abs(G.left)+R.width+100;if(M==0){an=true}if(M+1==ag.length){av=true}if(ao!=null&&ao!=""){al=ao}if(ap!=null&&ap!=""){ar=ap}for(var aq=0;aq<ag.length;aq++){VMM.Lib.removeClass(ag[aq].marker,"active")}if(R.start_page&&ag[0].type=="start"){VMM.Lib.visible(ag[0].marker,false);VMM.Lib.addClass(ag[0].marker,"start")}VMM.Lib.addClass(ag[M].marker,"active");VMM.Lib.stop(w);VMM.Lib.animate(w,ar,al,{left:G.left})};function W(am,al){VMM.Lib.animate(w,al.time/2,R.ease,{left:al.left})}var aj=function(){var an=0,aq=0,am=0,ap=[];for(var ao=0;ao<ag.length;ao++){if(af[ao].type=="start"){}else{var al=s(d,ag[ao].relative_pos),an=aq;aq=al.begin;am=aq-an;ap.push(am)}}return VMM.Util.average(ap).mean};var f=function(){var ap=0;var al=0;var aq=0;var ar=[];var an=true;for(var am=0;am<af.length;am++){if(af[am].type=="start"){trace("DATA DATE IS START")}else{var ao=af[am].startdate;ap=al;al=ao;aq=al-ap;ar.push(aq)}}return VMM.Util.average(ar)};var ae=function(){var al=R.nav.multiplier.current;for(var am=0;am<al;am++){if(aj()<75){if(R.nav.multiplier.current>1){R.nav.multiplier.current=R.nav.multiplier.current-1}}}};var S=function(){var am=B(af[0].startdate);var al=B(af[af.length-1].enddate);E.eon.type="eon";E.eon.first=am.eons;E.eon.base=Math.floor(am.eons);E.eon.last=al.eons;E.eon.number=D.eons;E.eon.multiplier=V.eons;E.eon.minor=V.eons;E.era.type="era";E.era.first=am.eras;E.era.base=Math.floor(am.eras);E.era.last=al.eras;E.era.number=D.eras;E.era.multiplier=V.eras;E.era.minor=V.eras;E.epoch.type="epoch";E.epoch.first=am.epochs;E.epoch.base=Math.floor(am.epochs);E.epoch.last=al.epochs;E.epoch.number=D.epochs;E.epoch.multiplier=V.epochs;E.epoch.minor=V.epochs;E.age.type="age";E.age.first=am.ages;E.age.base=Math.floor(am.ages);E.age.last=al.ages;E.age.number=D.ages;E.age.multiplier=V.ages;E.age.minor=V.ages;E.millenium.type="millenium";E.millenium.first=am.milleniums;E.millenium.base=Math.floor(am.milleniums);E.millenium.last=al.milleniums;E.millenium.number=D.milleniums;E.millenium.multiplier=V.millenium;E.millenium.minor=V.millenium;E.century.type="century";E.century.first=am.centuries;E.century.base=Math.floor(am.centuries);E.century.last=al.centuries;E.century.number=D.centuries;E.century.multiplier=V.century;E.century.minor=V.century;E.decade.type="decade";E.decade.first=am.decades;E.decade.base=Math.floor(am.decades);E.decade.last=al.decades;E.decade.number=D.decades;E.decade.multiplier=V.decade;E.decade.minor=V.decade;E.year.type="year";E.year.first=am.years;E.year.base=Math.floor(am.years);E.year.last=al.years;E.year.number=D.years;E.year.multiplier=1;E.year.minor=V.month;E.month.type="month";E.month.first=am.months;E.month.base=Math.floor(am.months);E.month.last=al.months;E.month.number=D.months;E.month.multiplier=1;E.month.minor=Math.round(V.week);E.week.type="week";E.week.first=am.weeks;E.week.base=Math.floor(am.weeks);E.week.last=al.weeks;E.week.number=D.weeks;E.week.multiplier=1;E.week.minor=7;E.day.type="day";E.day.first=am.days;E.day.base=Math.floor(am.days);E.day.last=al.days;E.day.number=D.days;E.day.multiplier=1;E.day.minor=24;E.hour.type="hour";E.hour.first=am.hours;E.hour.base=Math.floor(am.hours);E.hour.last=al.hours;E.hour.number=D.hours;E.hour.multiplier=1;E.hour.minor=60;E.minute.type="minute";E.minute.first=am.minutes;E.minute.base=Math.floor(am.minutes);E.minute.last=al.minutes;E.minute.number=D.minutes;E.minute.multiplier=1;E.minute.minor=60;E.second.type="decade";E.second.first=am.seconds;E.second.base=Math.floor(am.seconds);E.second.last=al.seconds;E.second.number=D.seconds;E.second.multiplier=1;E.second.minor=10};var B=function(am,an){var al={};al.days=am/z.day;al.weeks=al.days/z.week;al.months=al.days/z.month;al.years=al.months/z.year;al.hours=al.days*z.hour;al.minutes=al.days*z.minute;al.seconds=al.days*z.second;al.decades=al.years/z.decade;al.centuries=al.years/z.century;al.milleniums=al.years/z.millenium;al.ages=al.years/z.age;al.epochs=al.years/z.epoch;al.eras=al.years/z.era;al.eons=al.years/z.eon;return al};var b=function(am,ar,ap){var ao,an,al=am.type,aq={start:"",end:"",type:al};ao=B(ar);aq.start=ar.months;if(al=="eon"){aq.start=ao.eons}else{if(al=="era"){aq.start=ao.eras}else{if(al=="epoch"){aq.start=ao.epochs}else{if(al=="age"){aq.start=ao.ages}else{if(al=="millenium"){aq.start=ar.milleniums}else{if(al=="century"){aq.start=ao.centuries}else{if(al=="decade"){aq.start=ao.decades}else{if(al=="year"){aq.start=ao.years}else{if(al=="month"){aq.start=ao.months}else{if(al=="week"){aq.start=ao.weeks}else{if(al=="day"){aq.start=ao.days}else{if(al=="hour"){aq.start=ao.hours}else{if(al=="minute"){aq.start=ao.minutes}}}}}}}}}}}}}if(type.of(ap)=="date"){an=B(ap);aq.end=ap.months;if(al=="eon"){aq.end=an.eons}else{if(al=="era"){aq.end=an.eras}else{if(al=="epoch"){aq.end=an.epochs}else{if(al=="age"){aq.end=an.ages}else{if(al=="millenium"){aq.end=ap.milleniums}else{if(al=="century"){aq.end=an.centuries}else{if(al=="decade"){aq.end=an.decades}else{if(al=="year"){aq.end=an.years}else{if(al=="month"){aq.end=an.months}else{if(al=="week"){aq.end=an.weeks}else{if(al=="day"){aq.end=an.days}else{if(al=="hour"){aq.end=an.hours}else{if(al=="minute"){aq.end=an.minutes}}}}}}}}}}}}}}else{aq.end=aq.start}return aq};var s=function(am,al){return{begin:(al.start-d.base)*(R.nav.interval_width/R.nav.multiplier.current),end:(al.end-d.base)*(R.nav.interval_width/R.nav.multiplier.current)}};var ab=function(aF){var aJ=d.type,aG=d.multiplier,at=2,aw=0,ao=0,aI=150,aK=6,aL=0,am=R.width,au={left:G.visible.left-am,right:G.visible.right+am};R.nav.minor_width=R.width;VMM.Lib.removeClass(".flag","row1");VMM.Lib.removeClass(".flag","row2");VMM.Lib.removeClass(".flag","row3");for(var aH=0;aH<ag.length;aH++){var an,aD=ag[aH].marker,aA=ag[aH].flag,aq=ag[aH].lineevent,ax=s(d,ag[aH].relative_pos),ap=-2,ay=false;ar=ax.begin;_pos_end=ax.end;ar=Math.round(ar+ap);_pos_end=Math.round(_pos_end+ap);an=Math.round(_pos_end-ar);if(M==aH){G.left=(R.width/2)-ar;G.visible.left=Math.abs(G.left);G.visible.right=Math.abs(G.left)+R.width;au.left=G.visible.left-am;au.right=G.visible.right+am}if(Math.abs(ar)>=au.left&&Math.abs(ar)<=au.right){ay=true}if(aF){VMM.Lib.stop(aD);VMM.Lib.animate(aD,R.duration/2,R.ease,{left:ar})}else{VMM.Lib.stop(aD);VMM.Lib.css(aD,"left",ar)}if(aH==M){aL=ar}if(an>5){VMM.Lib.css(aq,"height",aK);VMM.Lib.css(aq,"width",an);VMM.Lib.css(aq,"top",aI)}if(N.length>0){for(var aC=0;aC<N.length;aC++){if(aC<R.nav.rows.length){if(ag[aH].tag==N[aC]){at=aC}}}}else{if(ar-aw<(R.nav.marker.width+R.spacing)){if(at<R.nav.rows.length-1){at++}else{at=0;ao++}}else{ao=1;at=1}}aw=ar;if(aF&&ay){VMM.Lib.stop(aA);VMM.Lib.animate(aA,R.duration,R.ease,{top:R.nav.rows[at]})}else{VMM.Lib.stop(aA);VMM.Lib.css(aA,"top",R.nav.rows[at])}if(R.start_page&&ag[aH].type=="start"){VMM.Lib.visible(aD,false)}if(ar>R.nav.minor_width){R.nav.minor_width=ar}if(ar<R.nav.minor_left){R.nav.minor_left=ar}}for(var aE=0;aE<I.length;aE++){var an,az=I[aE],av=az.content,ar=s(d,az.relative_pos),aB=ar.end-ar.begin,al=25;VMM.Lib.css(av,"left",ar.begin);VMM.Lib.css(av,"width",aB)}VMM.Lib.stop(w);VMM.Lib.animate(w,R.duration/2,R.ease,{left:(R.width/2)-(aL)})};var Y=function(au,at,ay,ax){var aB=d.type,az=d.multiplier,av=0,aD=0,am=R.width,aq={left:G.visible.left-am,right:G.visible.right+am};not_too_many=true;R.nav.minor_left=0;if(at.length>100){not_too_many=false;trace("TOO MANY "+at.length)}for(var aA=0;aA<at.length;aA++){var al=at[aA].element,aE=at[aA].date,aF=at[aA].visible,ar=s(d,at[aA].relative_pos),ap=ar.begin,an=at[aA].animation,aC=true,aw=false,ao=50;an.pos=ap;an.animate=false;if(Math.abs(ap)>=aq.left&&Math.abs(ap)<=aq.right){aw=true}if(true){if(R.nav.multiplier.current>16&&ax){aC=false}else{if((ap-av)<65){if((ap-av)<35){if(aA%4==0){if(ap==0){aC=false}}else{aC=false}}else{if(!VMM.Util.isEven(aA)){aC=false}}}}if(aC){if(at[aA].is_detached){VMM.Lib.append(au,al);at[aA].is_detached=false}}else{at[aA].is_detached=true;VMM.Lib.detach(al)}if(aF){if(!aC){an.opacity="0";if(ay&&not_too_many){an.animate=true}at[aA].interval_visible=false}else{an.opacity="100";if(ay&&aw){an.animate=true}}}else{an.opacity="100";if(aC){if(ay&&not_too_many){an.animate=true}else{if(ay&&aw){an.animate=true}}at[aA].interval_visible=true}else{if(ay&&not_too_many){an.animate=true}}}av=ap;if(ap>R.nav.minor_width){R.nav.minor_width=ap}if(ap<R.nav.minor_left){R.nav.minor_left=ap;trace("MINOR "+ap)}}if(an.animate){VMM.Lib.animate(al,R.duration/2,R.ease,{opacity:an.opacity,left:an.pos})}else{VMM.Lib.css(al,"opacity",an.opacity);VMM.Lib.css(al,"left",ap)}}VMM.Lib.css(U,"left",R.nav.minor_left-(R.width)/2);VMM.Lib.width(U,(R.nav.minor_width)+(R.width)+Math.abs(R.nav.minor_left))};var aa=function(an,aw,am){var ao=0,ax=true,at=0,ar=0,aq,ay,au={flag:false,offset:0};VMM.attachElement(am,"");an.date=new Date(af[0].startdate.getFullYear(),0,1,0,0,0);aq=an.date.getTimezoneOffset();for(var ap=0;ap<Math.ceil(an.number)+2;ap++){var av=false,al={element:VMM.appendAndGetElement(am,"<div>",an.classname),date:new Date(af[0].startdate.getFullYear(),0,1,0,0,0),visible:false,date_string:"",type:an.interval_type,relative_pos:0,is_detached:false,animation:{animate:false,pos:"",opacity:"100"}};if(an.type=="eon"){if(ax){ay=Math.floor(af[0].startdate.getFullYear()/500000000)*500000000}al.date.setFullYear(ay+(ao*500000000));av=true}else{if(an.type=="era"){if(ax){ay=Math.floor(af[0].startdate.getFullYear()/100000000)*100000000}al.date.setFullYear(ay+(ao*100000000));av=true}else{if(an.type=="epoch"){if(ax){ay=Math.floor(af[0].startdate.getFullYear()/10000000)*10000000}al.date.setFullYear(ay+(ao*10000000));av=true}else{if(an.type=="age"){if(ax){ay=Math.floor(af[0].startdate.getFullYear()/1000000)*1000000}al.date.setFullYear(ay+(ao*1000000));av=true}else{if(an.type=="millenium"){if(ax){ay=Math.floor(af[0].startdate.getFullYear()/1000)*1000}al.date.setFullYear(ay+(ao*1000));av=true}else{if(an.type=="century"){if(ax){ay=Math.floor(af[0].startdate.getFullYear()/100)*100}al.date.setFullYear(ay+(ao*100));av=true}else{if(an.type=="decade"){if(ax){ay=Math.floor(af[0].startdate.getFullYear()/10)*10}al.date.setFullYear(ay+(ao*10));av=true}else{if(d.type=="year"){if(ax){ay=af[0].startdate.getFullYear()}al.date.setFullYear(ay+ao);av=true}else{if(an.type=="month"){if(ax){ay=af[0].startdate.getMonth()}al.date.setMonth(ay+ao)}else{if(an.type=="week"){if(ax){ay=af[0].startdate.getMonth()}al.date.setMonth(af[0].startdate.getMonth());al.date.setDate(ay+(ao*7))}else{if(an.type=="day"){if(ax){ay=af[0].startdate.getDate()}al.date.setMonth(af[0].startdate.getMonth());al.date.setDate(ay+ao)}else{if(an.type=="hour"){if(ax){ay=af[0].startdate.getHours()}al.date.setMonth(af[0].startdate.getMonth());al.date.setDate(af[0].startdate.getDate());al.date.setHours(ay+ao)}else{if(an.type=="minute"){if(ax){ay=af[0].startdate.getMinutes()}al.date.setMonth(af[0].startdate.getMonth());al.date.setDate(af[0].startdate.getDate());al.date.setHours(af[0].startdate.getHours());al.date.setMinutes(ay+ao)}else{if(an.type=="second"){if(ax){ay=af[0].startdate.getSeconds()}al.date.setMonth(af[0].startdate.getMonth());al.date.setDate(af[0].startdate.getDate());al.date.setHours(af[0].startdate.getHours());al.date.setMinutes(af[0].startdate.getMinutes());al.date.setSeconds(ay+ao)}else{if(an.type=="millisecond"){if(ax){ay=af[0].startdate.getMilliseconds()}al.date.setMonth(af[0].startdate.getMonth());al.date.setDate(af[0].startdate.getDate());al.date.setHours(af[0].startdate.getHours());al.date.setMinutes(af[0].startdate.getMinutes());al.date.setSeconds(af[0].startdate.getSeconds());al.date.setMilliseconds(ay+ao)}}}}}}}}}}}}}}}if(VMM.Browser.browser=="Firefox"){if(al.date.getFullYear()=="1970"&&al.date.getTimezoneOffset()!=aq){trace("FIREFOX 1970 TIMEZONE OFFSET "+al.date.getTimezoneOffset()+" SHOULD BE "+aq);trace(an.type+" "+an.date);au.offset=(al.date.getTimezoneOffset()/60);au.flag=true;al.date.setHours(al.date.getHours()+au.offset)}else{if(au.flag){au.flag=false;al.date.setHours(al.date.getHours()+au.offset);if(av){au.flag=true}}}}if(av){if(al.date.getFullYear()<0){al.date_string=Math.abs(al.date.getFullYear()).toString()+" B.C."}else{al.date_string=al.date.getFullYear()}}else{al.date_string=VMM.Date.prettyDate(al.date,true)}ao++;ax=false;al.relative_pos=b(d,al.date);at=al.relative_pos.begin;if(al.relative_pos.begin>ar){ar=al.relative_pos.begin}VMM.appendElement(al.element,al.date_string);VMM.Lib.css(al.element,"text-indent",-(VMM.Lib.width(al.element)/2));VMM.Lib.css(al.element,"opacity","0");aw.push(al)}VMM.Lib.width(U,ar);Y(am,aw)};var T=function(){VMM.attachElement(P,"");w=VMM.appendAndGetElement(P,"<div>","timenav");c=VMM.appendAndGetElement(w,"<div>","content");ai=VMM.appendAndGetElement(w,"<div>","time");Z=VMM.appendAndGetElement(ai,"<div>","time-interval-minor");U=VMM.appendAndGetElement(Z,"<div>","minor");a=VMM.appendAndGetElement(ai,"<div>","time-interval-major");y=VMM.appendAndGetElement(ai,"<div>","time-interval");X=VMM.appendAndGetElement(P,"<div>","timenav-background");H=VMM.appendAndGetElement(X,"<div>","timenav-line");h=VMM.appendAndGetElement(X,"<div>","timenav-indicator");Q=VMM.appendAndGetElement(X,"<div>","timenav-interval-background","<div class='top-highlight'></div>");g=VMM.appendAndGetElement(P,"<div>","toolbar");j();A();ae();ab();Y(y,r,false,true);Y(a,O);if(R.start_page){$backhome=VMM.appendAndGetElement(g,"<div>","back-home","<div class='icon'></div>");VMM.bindEvent(".back-home",l,"click");VMM.Lib.css(g,"top",27);VMM.Lib.attribute($backhome,"title",VMM.master_config.language.messages.return_to_title);VMM.Lib.attribute($backhome,"rel","tooltip")}k=VMM.appendAndGetElement(g,"<div>","zoom-in","<div class='icon'></div>");L=VMM.appendAndGetElement(g,"<div>","zoom-out","<div class='icon'></div>");VMM.Lib.attribute(k,"title",VMM.master_config.language.messages.expand_timeline);VMM.Lib.attribute(k,"rel","tooltip");VMM.Lib.attribute(L,"title",VMM.master_config.language.messages.contract_timeline);VMM.Lib.attribute(L,"rel","tooltip");g.tooltip({selector:"div[rel=tooltip]",placement:"right"});if(VMM.Browser.device=="mobile"||VMM.Browser.device=="tablet"){VMM.TouchSlider.createPanel(X,w,R.width,R.spacing,false);VMM.bindEvent(w,W,"TOUCHUPDATE")}else{VMM.DragSlider.createPanel(P,w,R.width,R.spacing,false)}VMM.bindEvent(".zoom-in",ak,"click");VMM.bindEvent(".zoom-out",n,"click");VMM.fireEvent(P,"LOADED");e=true;o(true)};var j=function(){D=B((af[af.length-1].enddate)-(af[0].startdate),true);trace(D);S();if(D.centuries>af.length/R.nav.density){d=E.century;F=E.millenium;v=E.decade}else{if(D.decades>af.length/R.nav.density){d=E.decade;F=E.century;v=E.year}else{if(D.years>af.length/R.nav.density){d=E.year;F=E.decade;v=E.month}else{if(D.months>af.length/R.nav.density){d=E.month;F=E.year;v=E.day}else{if(D.days>af.length/R.nav.density){d=E.day;F=E.month;v=E.hour}else{if(D.hours>af.length/R.nav.density){d=E.hour;F=E.day;v=E.minute}else{if(D.minutes>af.length/R.nav.density){d=E.minute;F=E.hour;v=E.second}else{if(D.seconds>af.length/R.nav.density){d=E.second;F=E.minute;v=E.second}else{trace("NO IDEA WHAT THE TYPE SHOULD BE");d=E.day;F=E.month;v=E.hour}}}}}}}}trace("INTERVAL TYPE: "+d.type);trace("INTERVAL MAJOR TYPE: "+F.type);aa(d,r,y);aa(F,O,a)};var A=function(){var ao=2,ar=0,am=0;ag=[];I=[];for(var aB=0;aB<af.length;aB++){var ay,aw,aq,al,ap,an,at="",au=false;ay=VMM.appendAndGetElement(c,"<div>","marker");aw=VMM.appendAndGetElement(ay,"<div>","flag");aq=VMM.appendAndGetElement(aw,"<div>","flag-content");al=VMM.appendAndGetElement(ay,"<div>","dot");ap=VMM.appendAndGetElement(ay,"<div>","line");an=VMM.appendAndGetElement(ap,"<div>","event-line");_marker_relative_pos=b(d,af[aB].startdate,af[aB].enddate);_marker_thumb="";if(af[aB].asset!=null&&af[aB].asset!=""){VMM.appendElement(aq,VMM.MediaElement.thumbnail(af[aB].asset,24,24,af[aB].uniqueid))}else{VMM.appendElement(aq,"<div style='margin-right:7px;height:50px;width:2px;float:left;'></div>")}if(af[aB].title==""||af[aB].title==" "){trace("TITLE NOTHING");if(typeof af[aB].slug!="undefined"&&af[aB].slug!=""){trace("SLUG");at=VMM.Util.untagify(af[aB].slug);au=true}else{var ax=VMM.MediaType(af[aB].asset.media);if(ax.type=="quote"||ax.type=="unknown"){at=VMM.Util.untagify(ax.id);au=true}else{if(ax.type=="twitter"){au=false;VMM.appendElement(aq,"<h3 id='text_thumb_"+ax.id+"'>"+at+"</h3>")}else{au=false}}}}else{if(af[aB].title!=""||af[aB].title!=" "){trace(af[aB].title);at=VMM.Util.untagify(af[aB].title);au=true}else{trace("TITLE SLUG NOT FOUND "+af[aB].slug)}}if(au){VMM.appendElement(aq,"<h3>"+at+"</h3>")}VMM.Lib.attr(ay,"id",("marker_"+af[aB].uniqueid).toString());VMM.bindEvent(aw,u,"",{number:aB});VMM.bindEvent(aw,ac,"mouseenter mouseleave",{number:aB,elem:aw});var aC={marker:ay,flag:aw,lineevent:an,type:"marker",relative_pos:_marker_relative_pos,tag:af[aB].tag};if(af[aB].type=="start"){trace("BUILD MARKER HAS START PAGE");R.start_page=true;aC.type="start"}if(af[aB].type=="storify"){aC.type="storify"}if(af[aB].tag){N.push(af[aB].tag)}ag.push(aC)}N=VMM.Util.deDupeArray(N);for(var az=0;az<N.length;az++){if(az<R.nav.rows.length){var aD=VMM.appendAndGetElement(X,"<div>","timenav-tag");VMM.Lib.addClass(aD,"timenav-tag-row-"+(az+1));VMM.appendElement(aD,"<div><h3>"+N[az]+"</h3></div>")}}for(var aA=0;aA<C.length;aA++){var av={content:VMM.appendAndGetElement(c,"<div>","era"),startdate:VMM.Util.parseDate(C[aA].startDate),enddate:VMM.Util.parseDate(C[aA].endDate),title:C[aA].headline,uniqueid:VMM.Util.unique_ID(4),color:C[aA].color,relative_pos:""};av.relative_pos=b(d,C[aA].startdate,C[aA].enddate);VMM.Lib.attr(av.content,"id",av.uniqueid);VMM.Lib.css(av.content,"background",av.color);VMM.appendElement(av.content,"<h3>"+VMM.Util.unlinkify(av.title)+"</h3>");I.push(av)}}}}if(typeof VMM.Timeline!="undefined"&&typeof VMM.Timeline.DataObj=="undefined"){VMM.Timeline.DataObj={data_obj:{},model_array:[],getData:function(a){VMM.Timeline.DataObj.data_obj={};data=VMM.Timeline.DataObj.data_obj;VMM.fireEvent(global,VMM.Timeline.Config.events.messege,VMM.Timeline.Config.language.messages.loading_timeline);if(type.of(a)=="object"){trace("DATA SOURCE: JSON OBJECT");VMM.Timeline.DataObj.parseJSON(a)}else{if(type.of(a)=="string"){if(a.match("%23")){trace("DATA SOURCE: TWITTER SEARCH");VMM.Timeline.DataObj.model.tweets.getData("%23medill")}else{if(a.match("spreadsheet")){trace("DATA SOURCE: GOOGLE SPREADSHEET");VMM.Timeline.DataObj.model.googlespreadsheet.getData(a)}else{if(a.match("storify.com")){trace("DATA SOURCE: STORIFY");VMM.Timeline.DataObj.model.storify.getData(a)}else{trace("DATA SOURCE: JSON");VMM.getJSON(a,VMM.Timeline.DataObj.parseJSON)}}}}else{if(type.of(a)=="html"){trace("DATA SOURCE: HTML");VMM.Timeline.DataObj.parseHTML(a)}else{trace("DATA SOURCE: UNKNOWN")}}}},parseHTML:function(b){trace("parseHTML");trace("WARNING: THIS IS STILL ALPHA AND WILL NOT WORK WITH ID's other than #timeline");var c=VMM.Timeline.DataObj.data_template_obj;if(VMM.Lib.find("#timeline section","time")[0]){c.timeline.startDate=VMM.Lib.html(VMM.Lib.find("#timeline section","time")[0]);c.timeline.headline=VMM.Lib.html(VMM.Lib.find("#timeline section","h2"));c.timeline.text=VMM.Lib.html(VMM.Lib.find("#timeline section","article"));var a=false;if(VMM.Lib.find("#timeline section","figure img").length!=0){a=true;c.timeline.asset.media=VMM.Lib.attr(VMM.Lib.find("#timeline section","figure img"),"src")}else{if(VMM.Lib.find("#timeline section","figure a").length!=0){a=true;c.timeline.asset.media=VMM.Lib.attr(VMM.Lib.find("#timeline section","figure a"),"href")}else{}}if(a){if(VMM.Lib.find("#timeline section","cite").length!=0){c.timeline.asset.credit=VMM.Lib.html(VMM.Lib.find("#timeline section","cite"))}if(VMM.Lib.find(this,"figcaption").length!=0){c.timeline.asset.caption=VMM.Lib.html(VMM.Lib.find("#timeline section","figcaption"))}}}VMM.Lib.each("#timeline li",function(f,g){var e=false;var d={type:"default",startDate:"",headline:"",text:"",asset:{media:"",credit:"",caption:""},tags:"Optional"};if(VMM.Lib.find(this,"time")!=0){e=true;d.startDate=VMM.Lib.html(VMM.Lib.find(this,"time")[0]);if(VMM.Lib.find(this,"time")[1]){d.endDate=VMM.Lib.html(VMM.Lib.find(this,"time")[1])}d.headline=VMM.Lib.html(VMM.Lib.find(this,"h3"));d.text=VMM.Lib.html(VMM.Lib.find(this,"article"));var h=false;if(VMM.Lib.find(this,"figure img").length!=0){h=true;d.asset.media=VMM.Lib.attr(VMM.Lib.find(this,"figure img"),"src")}else{if(VMM.Lib.find(this,"figure a").length!=0){h=true;d.asset.media=VMM.Lib.attr(VMM.Lib.find(this,"figure a"),"href")}else{}}if(h){if(VMM.Lib.find(this,"cite").length!=0){d.asset.credit=VMM.Lib.html(VMM.Lib.find(this,"cite"))}if(VMM.Lib.find(this,"figcaption").length!=0){d.asset.caption=VMM.Lib.html(VMM.Lib.find(this,"figcaption"))}}trace(d);c.timeline.date.push(d)}});VMM.fireEvent(global,VMM.Timeline.Config.events.data_ready,c)},parseJSON:function(a){trace("parseJSON");if(a.timeline.type=="default"){trace("DATA SOURCE: JSON STANDARD TIMELINE");VMM.fireEvent(global,VMM.Timeline.Config.events.data_ready,a)}else{if(a.timeline.type=="twitter"){trace("DATA SOURCE: JSON TWEETS");VMM.Timeline.DataObj.model_Tweets.buildData(a)}else{trace("DATA SOURCE: UNKNOWN JSON");trace(type.of(a.timeline))}}},model:{googlespreadsheet:{getData:function(a){var c=VMM.Util.getUrlVars(a)["key"];var b="https://spreadsheets.google.com/feeds/list/"+c+"/od6/public/values?alt=json";VMM.getJSON(b,VMM.Timeline.DataObj.model.googlespreadsheet.buildData)},buildData:function(e){VMM.fireEvent(global,VMM.Timeline.Config.events.messege,"Parsing Data");var f=VMM.Timeline.DataObj.data_template_obj;for(var c=0;c<e.feed.entry.length;c++){var a=e.feed.entry[c];if(a.gsx$titleslide.$t.match("start")){f.timeline.startDate=a.gsx$startdate.$t;f.timeline.headline=a.gsx$headline.$t;f.timeline.asset.media=a.gsx$media.$t;f.timeline.asset.caption=a.gsx$mediacaption.$t;f.timeline.asset.credit=a.gsx$mediacredit.$t;f.timeline.text=a.gsx$text.$t;f.timeline.type="google spreadsheet"}else{var b={type:"google spreadsheet",startDate:a.gsx$startdate.$t,endDate:a.gsx$enddate.$t,headline:a.gsx$headline.$t,text:a.gsx$text.$t,asset:{media:a.gsx$media.$t,credit:a.gsx$mediacredit.$t,caption:a.gsx$mediacaption.$t},tags:"Optional"};if(typeof a.gsx$tag!="undefined"){b.tag=a.gsx$tag.$t}f.timeline.date.push(b)}}VMM.fireEvent(global,VMM.Timeline.Config.events.data_ready,f)}},storify:{getData:function(b){VMM.fireEvent(global,VMM.Timeline.Config.events.messege,"Loading Storify...");var d=b.split("storify.com/")[1];var c="http://api.storify.com/v1/stories/"+d+"?per_page=300&callback=?";var a=setTimeout(function(){trace("STORIFY timeout");VMM.fireEvent(global,VMM.Timeline.Config.events.messege,"Storify is not responding")},6000);VMM.getJSON(c,VMM.Timeline.DataObj.model.storify.buildData).error(function(e,g,f){trace("STORIFY error");trace("STORIFY ERROR: "+g+" "+e.responseText)}).success(function(e){clearTimeout(a)})},buildData:function(j){VMM.fireEvent(global,VMM.Timeline.Config.events.messege,"Parsing Data");var f=VMM.Timeline.DataObj.data_template_obj;f.timeline.startDate=new Date(j.content.date.created);f.timeline.headline=j.content.title;trace(j);var h="";var b=j.content.author.username;var a="";if(typeof j.content.author.name!="undefined"){b=j.content.author.name;a=j.content.author.username+"&nbsp;"}if(typeof j.content.description!="undefined"&&j.content.description!=null){h+=j.content.description}h+="<div class='storify'>";h+="<div class='vcard author'><a class='screen-name url' href='"+j.content.author.permalink+"' target='_blank'>";h+="<span class='avatar'><img src='"+j.content.author.avatar+"' style='max-width: 32px; max-height: 32px;'></span>";h+="<span class='fn'>"+b+"</span>";h+="<span class='nickname'>"+a+"<span class='thumbnail-inline'></span></span>";h+="</a>";h+="</div>";h+="</div>";f.timeline.text=h;f.timeline.asset.media=j.content.thumbnail;f.timeline.type="storify";for(var e=0;e<j.content.elements.length;e++){var n=j.content.elements[e];var l=false;var k=new Date(n.posted_at);trace(n.type);var o={type:"storify",startDate:n.posted_at,endDate:n.posted_at,headline:" ",slug:"",text:"",asset:{media:"",credit:"",caption:""}};if(n.type=="image"){if(typeof n.source.name!="undefined"){if(n.source.name=="flickr"){o.asset.media="http://flickr.com/photos/"+n.meta.pathalias+"/"+n.meta.id+"/";o.asset.credit="<a href='"+o.asset.media+"'>"+n.attribution.name+"</a>";o.asset.credit+=" on <a href='"+n.source.href+"'>"+n.source.name+"</a>"}else{if(n.source.name=="instagram"){o.asset.media=n.permalink;o.asset.credit="<a href='"+n.permalink+"'>"+n.attribution.name+"</a>";o.asset.credit+=" on <a href='"+n.source.href+"'>"+n.source.name+"</a>"}else{o.asset.credit="<a href='"+n.permalink+"'>"+n.attribution.name+"</a>";if(typeof n.source.href!="undefined"){o.asset.credit+=" on <a href='"+n.source.href+"'>"+n.source.name+"</a>"}o.asset.media=n.data.image.src}}}else{o.asset.credit="<a href='"+n.permalink+"'>"+n.attribution.name+"</a>";o.asset.media=n.data.image.src}o.slug=n.attribution.name;if(typeof n.data.image.caption!="undefined"){if(n.data.image.caption!="undefined"){o.asset.caption=n.data.image.caption;o.slug=n.data.image.caption}}}else{if(n.type=="quote"){if(n.permalink.match("twitter")){o.asset.media=n.permalink;o.slug=VMM.Util.untagify(n.data.quote.text)}else{if(n.permalink.match("storify")){l=true;o.asset.media="<blockquote>"+n.data.quote.text.replace(/<\s*\/?\s*b\s*.*?>/g,"")+"</blockquote>"}}}else{if(n.type=="link"){o.headline=n.data.link.title;o.text=n.data.link.description;if(n.data.link.thumbnail!="undefined"&&n.data.link.thumbnail!=""){o.asset.media=n.data.link.thumbnail}else{o.asset.media=n.permalink}o.asset.caption="<a href='"+n.permalink+"' target='_blank'>"+n.data.link.title+"</a>";o.slug=n.data.link.title}else{if(n.type=="text"){if(n.permalink.match("storify")){l=true;var g=j.content.author.username;var c="";if(typeof n.attribution.name!="undefined"){b=n.attribution.name;a=n.attribution.username+"&nbsp;"}var m="<div class='storify'>";m+="<blockquote><p>"+n.data.text.replace(/<\s*\/?\s*b\s*.*?>/g,"")+"</p></blockquote>";m+="<div class='vcard author'><a class='screen-name url' href='"+n.attribution.href+"' target='_blank'>";m+="<span class='avatar'><img src='"+n.attribution.thumbnail+"' style='max-width: 32px; max-height: 32px;'></span>";m+="<span class='fn'>"+b+"</span>";m+="<span class='nickname'>"+a+"<span class='thumbnail-inline'></span></span>";m+="</a></div></div>";o.text=m;if((e+1)>=j.content.elements.length){o.startDate=j.content.elements[e-1].posted_at}else{if(j.content.elements[e+1].type=="text"&&j.content.elements[e+1].permalink.match("storify")){if((e+2)>=j.content.elements.length){o.startDate=j.content.elements[e-1].posted_at}else{if(j.content.elements[e+2].type=="text"&&j.content.elements[e+2].permalink.match("storify")){if((e+3)>=j.content.elements.length){o.startDate=j.content.elements[e-1].posted_at}else{if(j.content.elements[e+3].type=="text"&&j.content.elements[e+3].permalink.match("storify")){o.startDate=j.content.elements[e-1].posted_at}else{trace("LEVEL 3");o.startDate=j.content.elements[e+3].posted_at}}}else{trace("LEVEL 2");o.startDate=j.content.elements[e+2].posted_at}}}else{trace("LEVEL 1");o.startDate=j.content.elements[e+1].posted_at}}o.endDate=o.startDate}}else{if(n.type=="video"){o.headline=n.data.video.title;o.asset.caption=n.data.video.description;o.asset.caption=n.source.username;o.asset.media=n.data.video.src}else{trace("NO MATCH ");trace(n)}}}}}if(l){o.slug=VMM.Util.untagify(n.data.text)}f.timeline.date.push(o)}VMM.fireEvent(global,VMM.Timeline.Config.events.data_ready,f)}},tweets:{type:"twitter",buildData:function(a){VMM.bindEvent(global,VMM.Timeline.DataObj.model.tweets.onTwitterDataReady,"TWEETSLOADED");VMM.ExternalAPI.twitter.getTweets(a.timeline.tweets)},getData:function(a){VMM.bindEvent(global,VMM.Timeline.DataObj.model.tweets.onTwitterDataReady,"TWEETSLOADED");VMM.ExternalAPI.twitter.getTweetSearch(a)},onTwitterDataReady:function(c,f){var g=VMM.Timeline.DataObj.data_template_obj;for(var b=0;b<f.tweetdata.length;b++){var a={type:"tweets",startDate:"",headline:"",text:"",asset:{media:"",credit:"",caption:""},tags:"Optional"};a.startDate=f.tweetdata[b].raw.created_at;if(type.of(f.tweetdata[b].raw.from_user_name)){a.headline=f.tweetdata[b].raw.from_user_name+" (<a href='https://twitter.com/"+f.tweetdata[b].raw.from_user+"'>@"+f.tweetdata[b].raw.from_user+"</a>)"}else{a.headline=f.tweetdata[b].raw.user.name+" (<a href='https://twitter.com/"+f.tweetdata[b].raw.user.screen_name+"'>@"+f.tweetdata[b].raw.user.screen_name+"</a>)"}a.asset.media=f.tweetdata[b].content;g.timeline.date.push(a)}VMM.fireEvent(global,VMM.Timeline.Config.events.data_ready,g)}}},data_template_obj:{timeline:{headline:"",description:"",asset:{media:"",credit:"",caption:""},date:[]}},date_obj:{startDate:"2012,2,2,11,30",headline:"",text:"",asset:{media:"http://youtu.be/vjVfu8-Wp6s",credit:"",caption:""},tags:"Optional"}}};